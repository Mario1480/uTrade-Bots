(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{2883:(e,t,n)=>{"use strict";n.d(t,{$P:()=>f,Al:()=>v,GC:()=>g,Vg:()=>d,hD:()=>c,mu:()=>m});var a,l,s,r,u=n(7011);null!=(null!=(a=u.env.API_URL)?a:u.env.API_BASE_URL)||u.env.NEXT_PUBLIC_API_URL;let i=null!=(r=null!=(s=null!=(l=u.env.NEXT_PUBLIC_API_URL)?l:u.env.API_URL)?s:u.env.API_BASE_URL)?r:"http://localhost:4000";class c extends Error{constructor(e,t,n){super(e),this.status=t,this.payload=n}}async function o(e,t,n){let a={"Content-Type":"application/json"};if(!["GET","HEAD","OPTIONS"].includes(e)){let e=function(e){if("undefined"==typeof document)return null;let t=document.cookie.match(new RegExp("(^|; )".concat(e,"=([^;]*)")));return t?decodeURIComponent(t[2]):null}("mm_csrf");e&&(a["x-csrf-token"]=e)}let l=await fetch("".concat(i).concat(t),{method:e,headers:a,body:n?JSON.stringify(n):void 0,credentials:"include",cache:"no-store"});if(!l.ok){let n=null;try{n=await l.json()}catch(e){}throw new c((null==n?void 0:n.error)||(null==n?void 0:n.message)||"".concat(e," ").concat(t," failed (").concat(l.status,")"),l.status,n)}return l.json()}function d(e){return o("GET",e)}function f(e,t){return o("POST",e,t)}function m(e,t){return o("PUT",e,t)}function v(e){return o("DELETE",e)}function g(e){return o("DELETE",e)}},7541:(e,t,n)=>{"use strict";var a=n(3041);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},7831:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(4568),l=n(9664),s=n.n(l),r=n(7541),u=n(7620),i=n(2883);function c(e){return e instanceof i.hD?"".concat(e.message," (HTTP ").concat(e.status,")"):e&&"object"==typeof e&&"message"in e?String(e.message):String(e)}function o(){var e,t,n,l,o,f,m,v,g,h,p,x,y;let j=(0,r.useParams)().id,[b,P]=(0,u.useState)(null),[S,C]=(0,u.useState)(null),[E,_]=(0,u.useState)(null),[T,w]=(0,u.useState)(null);async function N(){w(null);try{let[e,t]=await Promise.all([(0,i.Vg)("/bots/".concat(j)),(0,i.Vg)("/bots/".concat(j,"/runtime")).catch(()=>null)]);P(e),C(t)}catch(e){w(c(e))}}async function L(){_("start"),w(null);try{await (0,i.$P)("/bots/".concat(j,"/start"),{}),await N()}catch(e){w(c(e))}finally{_("")}}async function R(){_("stop"),w(null);try{await (0,i.$P)("/bots/".concat(j,"/stop"),{}),await N()}catch(e){w(c(e))}finally{_("")}}return((0,u.useEffect)(()=>{if(!j)return;N();let e=setInterval(()=>{N()},2500);return()=>clearInterval(e)},[j]),b)?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:12,marginBottom:12,flexWrap:"wrap"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{style:{margin:0},children:b.name}),(0,a.jsxs)("div",{style:{fontSize:13,color:"var(--muted)"},children:[b.exchange," \xb7 ",b.symbol]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,a.jsx)(s(),{href:"/",className:"btn",children:"Back"}),(0,a.jsx)("button",{className:"btn btnPrimary",onClick:L,disabled:"start"===E||"running"===b.status,children:"start"===E?"Starting...":"Start"}),(0,a.jsx)("button",{className:"btn",onClick:R,disabled:"stop"===E||"stopped"===b.status,children:"stop"===E?"Stopping...":"Stop"})]})]}),T?(0,a.jsx)("div",{className:"card",style:{padding:12,borderColor:"#ef4444",marginBottom:12},children:T}):null,(0,a.jsx)("div",{className:"card",style:{padding:14,marginBottom:12},children:(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:10},children:[(0,a.jsx)(d,{label:"Bot status",value:b.status}),(0,a.jsx)(d,{label:"Exchange account",value:null!=(m=null==(e=b.exchangeAccount)?void 0:e.label)?m:"-"}),(0,a.jsx)(d,{label:"Runner status",value:null!=(v=null==S?void 0:S.status)?v:"n/a"}),(0,a.jsx)(d,{label:"Runtime reason",value:null!=(g=null==S?void 0:S.reason)?g:"-"}),(0,a.jsx)(d,{label:"Runtime updated",value:(null==S?void 0:S.updatedAt)?new Date(S.updatedAt).toLocaleString():"-"})]})}),(0,a.jsxs)("div",{className:"card",style:{padding:14},children:[(0,a.jsx)("h3",{style:{marginTop:0},children:"Futures Config"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:10},children:[(0,a.jsx)(d,{label:"Strategy",value:null!=(h=null==(t=b.futuresConfig)?void 0:t.strategyKey)?h:"-"}),(0,a.jsx)(d,{label:"Margin mode",value:null!=(p=null==(n=b.futuresConfig)?void 0:n.marginMode)?p:"-"}),(0,a.jsx)(d,{label:"Leverage",value:null!=(x=null==(l=b.futuresConfig)?void 0:l.leverage)?x:"-"}),(0,a.jsx)(d,{label:"Tick interval",value:(null==(o=b.futuresConfig)?void 0:o.tickMs)?"".concat(b.futuresConfig.tickMs," ms"):"-"}),(0,a.jsx)(d,{label:"Testnet",value:String(null!=(y=null==(f=b.futuresConfig)?void 0:f.testnet)&&y)})]})]})]}):(0,a.jsx)("div",{className:"card",style:{padding:14},children:T?"Load error: ".concat(T):"Loading..."})}function d(e){let{label:t,value:n}=e;return(0,a.jsxs)("div",{className:"card",style:{padding:"8px 10px"},children:[(0,a.jsx)("div",{style:{fontSize:11,color:"var(--muted)"},children:t}),(0,a.jsx)("div",{style:{fontSize:14},children:String(n)})]})}},8213:(e,t,n)=>{Promise.resolve().then(n.bind(n,7831))}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=8213)),_N_E=e.O()}]);