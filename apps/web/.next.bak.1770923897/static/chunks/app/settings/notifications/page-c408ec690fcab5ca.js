(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{479:(e,t,n)=>{Promise.resolve().then(n.bind(n,5179))},2883:(e,t,n)=>{"use strict";n.d(t,{$P:()=>g,Al:()=>m,GC:()=>f,Vg:()=>u,hD:()=>c,mu:()=>h});var a,s,l,r,i=n(7011);null!=(null!=(a=i.env.API_URL)?a:i.env.API_BASE_URL)||i.env.NEXT_PUBLIC_API_URL;let o=null!=(r=null!=(l=null!=(s=i.env.NEXT_PUBLIC_API_URL)?s:i.env.API_URL)?l:i.env.API_BASE_URL)?r:"http://localhost:4000";class c extends Error{constructor(e,t,n){super(e),this.status=t,this.payload=n}}async function d(e,t,n){let a={"Content-Type":"application/json"};if(!["GET","HEAD","OPTIONS"].includes(e)){let e=function(e){if("undefined"==typeof document)return null;let t=document.cookie.match(new RegExp("(^|; )".concat(e,"=([^;]*)")));return t?decodeURIComponent(t[2]):null}("mm_csrf");e&&(a["x-csrf-token"]=e)}let s=await fetch("".concat(o).concat(t),{method:e,headers:a,body:n?JSON.stringify(n):void 0,credentials:"include",cache:"no-store"});if(!s.ok){let n=null;try{n=await s.json()}catch(e){}throw new c((null==n?void 0:n.error)||(null==n?void 0:n.message)||"".concat(e," ").concat(t," failed (").concat(s.status,")"),s.status,n)}return s.json()}function u(e){return d("GET",e)}function g(e,t){return d("POST",e,t)}function h(e,t){return d("PUT",e,t)}function m(e){return d("DELETE",e)}function f(e){return d("DELETE",e)}},5179:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(4568),s=n(9664),l=n.n(s),r=n(7620),i=n(2883);function o(){let[e,t]=(0,r.useState)(!1),[n,s]=(0,r.useState)(null),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1);function m(e){if(e instanceof i.hD){var t;let n=(null==(t=e.payload)?void 0:t.details)?" — ".concat(e.payload.details):"";return"".concat(e.message).concat(n," (HTTP ").concat(e.status,")")}return(null==e?void 0:e.message)?String(e.message):String(e)}async function f(){t(!0),s(null);try{await (0,i.$P)("/alerts/test"),s("Test alert sent to Telegram.")}catch(t){let e=m(t);s((e.includes("telegram_not_configured"),e))}finally{t(!1)}}async function y(){try{var e;let t=await (0,i.Vg)("/settings/alerts");c(null!=(e=t.telegramChatId)?e:""),u(!!t.telegramBotConfigured)}catch(e){}}async function p(){h(!0),s(null);try{await (0,i.mu)("/settings/alerts",{telegramChatId:o.trim()||null}),s("Saved.")}catch(e){s(m(e))}finally{h(!1)}}return(0,r.useEffect)(()=>{y()},[]),(0,a.jsxs)("div",{className:"settingsWrap",children:[(0,a.jsxs)("div",{style:{marginBottom:10,display:"flex",gap:8,flexWrap:"wrap"},children:[(0,a.jsx)(l(),{href:"/settings",className:"btn",children:"← Back to settings"}),(0,a.jsx)(l(),{href:"/",className:"btn",children:"← Back to dashboard"})]}),(0,a.jsx)("h2",{style:{marginTop:0},children:"Notifications"}),(0,a.jsxs)("div",{className:"card settingsSection",style:{fontSize:13},children:[(0,a.jsxs)("div",{className:"settingsSectionHeader",children:[(0,a.jsx)("div",{style:{fontWeight:700},children:"Telegram alerts"}),(0,a.jsx)("a",{className:"btn",href:"https://t.me/utrade_ai_signals_bot",target:"_blank",rel:"noreferrer",children:"Open Bot (@utrade_ai_signals_bot)"})]}),(0,a.jsx)("div",{style:{color:"var(--muted)",marginBottom:10},children:"Bot token is managed globally by admin. You only need your Chat ID here."}),d?null:(0,a.jsx)("div",{style:{color:"#fca5a5",marginBottom:10,fontSize:12},children:"Telegram bot token is not configured by admin yet."}),(0,a.jsxs)("div",{style:{color:"var(--muted)",marginBottom:10},children:["Tip: For Telegram groups, the Chat ID usually starts with ",(0,a.jsx)("b",{children:"-100"}),"."]}),(0,a.jsx)("div",{style:{display:"grid",gap:10,marginBottom:10},children:(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Chat ID"}),(0,a.jsx)("input",{className:"input",placeholder:"123456789",value:o,onChange:e=>c(e.target.value)})]})}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:10},children:[(0,a.jsx)("button",{className:"btn btnPrimary",onClick:p,disabled:g,children:g?"Saving...":"Save settings"}),(0,a.jsx)("button",{className:"btn",onClick:f,disabled:e,children:e?"Sending...":"Send test message"})]}),n?(0,a.jsx)("div",{style:{marginTop:10,color:"var(--muted)"},children:n}):null]})]})}}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=479)),_N_E=e.O()}]);