(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{2883:(e,t,n)=>{"use strict";n.d(t,{$P:()=>h,Al:()=>m,GC:()=>p,Vg:()=>u,hD:()=>r,mu:()=>f});var s,l,a,i,c=n(7011);null!=(null!=(s=c.env.API_URL)?s:c.env.API_BASE_URL)||c.env.NEXT_PUBLIC_API_URL;let o=null!=(i=null!=(a=null!=(l=c.env.NEXT_PUBLIC_API_URL)?l:c.env.API_URL)?a:c.env.API_BASE_URL)?i:"http://localhost:4000";class r extends Error{constructor(e,t,n){super(e),this.status=t,this.payload=n}}async function d(e,t,n){let s={"Content-Type":"application/json"};if(!["GET","HEAD","OPTIONS"].includes(e)){let e=function(e){if("undefined"==typeof document)return null;let t=document.cookie.match(new RegExp("(^|; )".concat(e,"=([^;]*)")));return t?decodeURIComponent(t[2]):null}("mm_csrf");e&&(s["x-csrf-token"]=e)}let l=await fetch("".concat(o).concat(t),{method:e,headers:s,body:n?JSON.stringify(n):void 0,credentials:"include",cache:"no-store"});if(!l.ok){let n=null;try{n=await l.json()}catch(e){}throw new r((null==n?void 0:n.error)||(null==n?void 0:n.message)||"".concat(e," ").concat(t," failed (").concat(l.status,")"),l.status,n)}return l.json()}function u(e){return d("GET",e)}function h(e,t){return d("POST",e,t)}function f(e,t){return d("PUT",e,t)}function m(e){return d("DELETE",e)}function p(e){return d("DELETE",e)}},5510:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var s=n(4568),l=n(9664),a=n.n(l),i=n(7620),c=n(2883);function o(){let[e,t]=(0,i.useState)(""),[n,l]=(0,i.useState)([]),[o,r]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null);function h(e){return e instanceof c.hD?"".concat(e.message," (HTTP ").concat(e.status,")"):(null==e?void 0:e.message)?String(e.message):String(e)}async function f(){try{r(!0);let e=await (0,c.Vg)("/bots");l(e)}catch(e){t(h(e))}finally{r(!1)}}async function m(e){if(window.confirm('Delete bot "'.concat(e.name,'" (').concat(e.symbol,")? This cannot be undone."))){u(e.id);try{await (0,c.Al)("/bots/".concat(e.id)),t("deleted ".concat(e.name)),await f()}catch(e){t(h(e))}finally{u(null)}}}return(0,i.useEffect)(()=>{f()},[]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{marginBottom:10,display:"flex",gap:8,flexWrap:"wrap"},children:[(0,s.jsx)(a(),{href:"/settings",className:"btn",children:"← Back to settings"}),(0,s.jsx)(a(),{href:"/",className:"btn",children:"← Back to dashboard"})]}),(0,s.jsx)("h2",{children:"Setup"}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[(0,s.jsx)(a(),{href:"/bots/new",className:"btn btnPrimary",children:"New Bot"}),(0,s.jsx)("button",{onClick:f,className:"btn",children:"Refresh list"})]}),e?(0,s.jsx)("p",{children:e}):null,(0,s.jsxs)("div",{className:"card",style:{padding:12},children:[(0,s.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Bots"}),o?(0,s.jsx)("div",{style:{fontSize:12,color:"var(--muted)"},children:"Loading..."}):0===n.length?(0,s.jsx)("div",{style:{fontSize:12,color:"var(--muted)"},children:"No bots yet."}):(0,s.jsx)("div",{style:{display:"grid",gap:10},children:n.map(e=>(0,s.jsxs)("div",{className:"card",style:{padding:12,display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",flexWrap:"wrap"},children:[(0,s.jsxs)("div",{style:{minWidth:220},children:[(0,s.jsx)("div",{style:{fontWeight:700},children:e.name}),(0,s.jsxs)("div",{style:{fontSize:12,color:"var(--muted)"},children:[e.exchange," \xb7 ",e.symbol," \xb7 ",e.status]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,s.jsx)(a(),{href:"/bots/".concat(e.id),className:"btn",children:"Open"}),(0,s.jsx)("button",{className:"btn btnStop",onClick:()=>m(e),disabled:d===e.id,children:d===e.id?"Deleting...":"Delete"})]})]},e.id))})]})]})}},9920:(e,t,n)=>{Promise.resolve().then(n.bind(n,5510))}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=9920)),_N_E=e.O()}]);