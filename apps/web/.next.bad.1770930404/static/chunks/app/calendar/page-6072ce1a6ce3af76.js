(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{2883:(e,t,n)=>{"use strict";n.d(t,{$P:()=>m,Al:()=>h,GC:()=>g,Vg:()=>u,hD:()=>c,mu:()=>v});var i,a,o,l,s=n(7011);null!=(null!=(i=s.env.API_URL)?i:s.env.API_BASE_URL)||s.env.NEXT_PUBLIC_API_URL;let r=null!=(l=null!=(o=null!=(a=s.env.NEXT_PUBLIC_API_URL)?a:s.env.API_URL)?o:s.env.API_BASE_URL)?l:"http://localhost:4000";class c extends Error{constructor(e,t,n){super(e),this.status=t,this.payload=n}}async function d(e,t,n){let i={"Content-Type":"application/json"};if(!["GET","HEAD","OPTIONS"].includes(e)){let e=function(e){if("undefined"==typeof document)return null;let t=document.cookie.match(new RegExp("(^|; )".concat(e,"=([^;]*)")));return t?decodeURIComponent(t[2]):null}("mm_csrf");e&&(i["x-csrf-token"]=e)}let a=await fetch("".concat(r).concat(t),{method:e,headers:i,body:n?JSON.stringify(n):void 0,credentials:"include",cache:"no-store"});if(!a.ok){let n=null;try{n=await a.json()}catch(e){}throw new c((null==n?void 0:n.error)||(null==n?void 0:n.message)||"".concat(e," ").concat(t," failed (").concat(a.status,")"),a.status,n)}return a.json()}function u(e){return d("GET",e)}function m(e,t){return d("POST",e,t)}function v(e,t){return d("PUT",e,t)}function h(e){return d("DELETE",e)}function g(e){return d("DELETE",e)}},3211:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var i=n(4568),a=n(7620),o=n(2883);function l(e){return null!==e&&Number.isFinite(e)?e.toLocaleString(void 0,{maximumFractionDigits:4}):"-"}function s(e){return e.toISOString().slice(0,10)}function r(e,t){return new Date(e.getTime()+24*t*36e5)}function c(){let[e,t]=(0,a.useState)("USD"),[n,c]=(0,a.useState)("high"),[d,u]=(0,a.useState)(()=>s(new Date)),[m,v]=(0,a.useState)(()=>s(r(new Date,3))),[h,g]=(0,a.useState)([]),[p,x]=(0,a.useState)(null),[f,y]=(0,a.useState)(!0),[j,S]=(0,a.useState)(null);async function b(){y(!0),S(null);try{let[t,i]=await Promise.all([(0,o.Vg)("/economic-calendar?from=".concat(encodeURIComponent(d),"&to=").concat(encodeURIComponent(m),"&impact=").concat(n,"&currency=").concat(encodeURIComponent(e))),(0,o.Vg)("/economic-calendar/next?currency=".concat(encodeURIComponent(e),"&impact=").concat(n))]);g(Array.isArray(t.events)?t.events:[]),x(i)}catch(e){S(e instanceof o.hD?"".concat(e.message," (HTTP ").concat(e.status,")"):e&&"object"==typeof e&&"message"in e?String(e.message):String(e))}finally{y(!1)}}(0,a.useEffect)(()=>{b()},[e,n,d,m]);let N=(0,a.useMemo)(()=>{let e=new Map;for(let n of h){var t;let i=n.ts.slice(0,10),a=null!=(t=e.get(i))?t:[];a.push(n),e.set(i,a)}return Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0]))},[h]);return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"dashboardHeader",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{margin:0},children:"Economic Calendar"}),(0,i.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:"High-impact macro events and blackout status."})]})}),(0,i.jsx)("div",{className:"card",style:{padding:12,marginBottom:12},children:(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(150px,1fr))",gap:10},children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("div",{style:{fontSize:12,color:"var(--muted)",marginBottom:4},children:"Currency"}),(0,i.jsxs)("select",{className:"input",value:e,onChange:e=>t(e.target.value.toUpperCase()),children:[(0,i.jsx)("option",{value:"USD",children:"USD"}),(0,i.jsx)("option",{value:"EUR",children:"EUR"})]})]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("div",{style:{fontSize:12,color:"var(--muted)",marginBottom:4},children:"Impact"}),(0,i.jsxs)("select",{className:"input",value:n,onChange:e=>c(e.target.value),children:[(0,i.jsx)("option",{value:"high",children:"high"}),(0,i.jsx)("option",{value:"medium",children:"medium"}),(0,i.jsx)("option",{value:"low",children:"low"})]})]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("div",{style:{fontSize:12,color:"var(--muted)",marginBottom:4},children:"From"}),(0,i.jsx)("input",{className:"input",type:"date",value:d,onChange:e=>u(e.target.value)})]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("div",{style:{fontSize:12,color:"var(--muted)",marginBottom:4},children:"To"}),(0,i.jsx)("input",{className:"input",type:"date",value:m,onChange:e=>v(e.target.value)})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"end",gap:8},children:[(0,i.jsx)("button",{className:"btn",onClick:()=>u(s(new Date)),type:"button",children:"Today"}),(0,i.jsx)("button",{className:"btn",onClick:()=>v(s(r(new Date,3))),type:"button",children:"Next 3d"}),(0,i.jsx)("button",{className:"btn btnPrimary",onClick:()=>void b(),type:"button",children:"Refresh"})]})]})}),p?(0,i.jsxs)("div",{className:"card",style:{padding:12,marginBottom:12,borderColor:p.blackoutActive?"#ef4444":void 0},children:[(0,i.jsxs)("div",{style:{fontWeight:700,marginBottom:6},children:[p.blackoutActive?"Blackout active":"No active blackout"," (",p.currency,")"]}),p.blackoutActive&&p.activeWindow?(0,i.jsxs)("div",{style:{color:"var(--muted)",fontSize:13},children:["Until ",new Date(p.activeWindow.to).toLocaleString()," \xb7 ",p.activeWindow.event.title]}):p.nextEvent?(0,i.jsxs)("div",{style:{color:"var(--muted)",fontSize:13},children:["Next ",p.impactMin," event: ",p.nextEvent.title," at"," ",new Date(p.nextEvent.ts).toLocaleString()]}):(0,i.jsx)("div",{style:{color:"var(--muted)",fontSize:13},children:"No upcoming events in selected range."})]}):null,j?(0,i.jsxs)("div",{className:"card",style:{padding:12,borderColor:"#ef4444",marginBottom:12},children:[(0,i.jsx)("strong",{children:"Load error:"})," ",j]}):null,(0,i.jsxs)("div",{className:"card",style:{padding:12},children:[(0,i.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Events"}),f?(0,i.jsx)("div",{style:{color:"var(--muted)"},children:"Loading events..."}):0===N.length?(0,i.jsx)("div",{style:{color:"var(--muted)"},children:"No events found for the selected filters."}):N.map(e=>{let[t,n]=e;return(0,i.jsxs)("div",{style:{marginBottom:14},children:[(0,i.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:t}),(0,i.jsx)("div",{style:{display:"grid",gap:8},children:n.map(e=>{var t;return(0,i.jsxs)("div",{className:"card",style:{margin:0,padding:10},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:8,flexWrap:"wrap"},children:[(0,i.jsx)("div",{style:{fontWeight:700},children:e.title}),(0,i.jsx)("span",{className:"badge ".concat("high"===(t=e.impact)?"predictionReasonBadgeTrigger":"medium"===t?"predictionReasonBadgeScheduled":"predictionReasonBadgeUnknown"),children:e.impact})]}),(0,i.jsxs)("div",{style:{fontSize:12,color:"var(--muted)",marginTop:4},children:[new Date(e.ts).toLocaleString()," \xb7 ",e.country," \xb7 ",e.currency]}),(0,i.jsxs)("div",{style:{fontSize:12,color:"var(--muted)",marginTop:4},children:["Forecast: ",l(e.forecast)," \xb7 Previous: ",l(e.previous)," \xb7 Actual: ",l(e.actual)]})]},e.id)})})]},t)})]})]})}},5021:(e,t,n)=>{Promise.resolve().then(n.bind(n,3211))}},e=>{e.O(0,[587,18,358],()=>e(e.s=5021)),_N_E=e.O()}]);