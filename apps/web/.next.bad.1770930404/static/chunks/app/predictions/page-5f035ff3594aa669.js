(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{2883:(e,i,a)=>{"use strict";a.d(i,{$P:()=>p,Al:()=>m,GC:()=>v,Vg:()=>u,hD:()=>o,mu:()=>h});var t,n,l,s,d=a(7011);null!=(null!=(t=d.env.API_URL)?t:d.env.API_BASE_URL)||d.env.NEXT_PUBLIC_API_URL;let r=null!=(s=null!=(l=null!=(n=d.env.NEXT_PUBLIC_API_URL)?n:d.env.API_URL)?l:d.env.API_BASE_URL)?s:"http://localhost:4000";class o extends Error{constructor(e,i,a){super(e),this.status=i,this.payload=a}}async function c(e,i,a){let t={"Content-Type":"application/json"};if(!["GET","HEAD","OPTIONS"].includes(e)){let e=function(e){if("undefined"==typeof document)return null;let i=document.cookie.match(new RegExp("(^|; )".concat(e,"=([^;]*)")));return i?decodeURIComponent(i[2]):null}("mm_csrf");e&&(t["x-csrf-token"]=e)}let n=await fetch("".concat(r).concat(i),{method:e,headers:t,body:a?JSON.stringify(a):void 0,credentials:"include",cache:"no-store"});if(!n.ok){let a=null;try{a=await n.json()}catch(e){}throw new o((null==a?void 0:a.error)||(null==a?void 0:a.message)||"".concat(e," ").concat(i," failed (").concat(n.status,")"),n.status,a)}return n.json()}function u(e){return c("GET",e)}function p(e,i){return c("POST",e,i)}function h(e,i){return c("PUT",e,i)}function m(e){return c("DELETE",e)}function v(e){return c("DELETE",e)}},5606:(e,i,a)=>{"use strict";a.d(i,{i4:()=>u,jH:()=>p,xf:()=>n});var t=a(3916);let n="tradeDeskPrefill",l=t.Ik({type:t.k5(["market","limit"]),price:t.ai().positive().optional()}),s=t.Ik({mode:t.k5(["percent_balance","fixed_quote"]),value:t.ai().positive()}),d=t.Ik({name:t.Yj().min(1),value:t.L5()}),r=t.Ik({rsi_14:t.ai().nullable().optional(),macd:t.Ik({line:t.ai().nullable().optional(),signal:t.ai().nullable().optional(),hist:t.ai().nullable().optional()}).nullable().optional(),bb:t.Ik({upper:t.ai().nullable().optional(),mid:t.ai().nullable().optional(),lower:t.ai().nullable().optional(),width_pct:t.ai().nullable().optional(),pos:t.ai().nullable().optional()}).nullable().optional(),vwap:t.Ik({value:t.ai().nullable().optional(),dist_pct:t.ai().nullable().optional(),mode:t.Yj().optional(),sessionStartUtcMs:t.ai().nullable().optional()}).nullable().optional(),adx:t.Ik({adx_14:t.ai().nullable().optional(),plus_di_14:t.ai().nullable().optional(),minus_di_14:t.ai().nullable().optional()}).nullable().optional(),stochrsi:t.Ik({rsi_len:t.ai().int().positive().optional(),stoch_len:t.ai().int().positive().optional(),smooth_k:t.ai().int().positive().optional(),smooth_d:t.ai().int().positive().optional(),k:t.ai().nullable().optional(),d:t.ai().nullable().optional(),value:t.ai().nullable().optional()}).nullable().optional(),volume:t.Ik({lookback:t.ai().int().positive().optional(),vol_z:t.ai().nullable().optional(),rel_vol:t.ai().nullable().optional(),vol_ema_fast:t.ai().nullable().optional(),vol_ema_slow:t.ai().nullable().optional(),vol_trend:t.ai().nullable().optional()}).nullable().optional(),fvg:t.Ik({lookback:t.ai().int().positive().optional(),fill_rule:t.k5(["overlap","mid_touch"]).optional(),open_bullish_count:t.ai().int().nonnegative().optional(),open_bearish_count:t.ai().int().nonnegative().optional(),nearest_bullish_gap:t.Ik({upper:t.ai().nullable().optional(),lower:t.ai().nullable().optional(),mid:t.ai().nullable().optional(),dist_pct:t.ai().nullable().optional(),age_bars:t.ai().nullable().optional()}).nullable().optional(),nearest_bearish_gap:t.Ik({upper:t.ai().nullable().optional(),lower:t.ai().nullable().optional(),mid:t.ai().nullable().optional(),dist_pct:t.ai().nullable().optional(),age_bars:t.ai().nullable().optional()}).nullable().optional(),last_created:t.Ik({type:t.k5(["bullish","bearish"]).nullable().optional(),age_bars:t.ai().nullable().optional()}).nullable().optional(),last_filled:t.Ik({type:t.k5(["bullish","bearish"]).nullable().optional(),age_bars:t.ai().nullable().optional()}).nullable().optional()}).nullable().optional()}).optional(),o=t.Ik({exchange:t.Yj().trim().min(1),accountId:t.Yj().trim().min(1),symbol:t.Yj().trim().min(1),marketType:t.k5(["spot","perp"]),timeframe:t.k5(["5m","15m","1h","4h","1d"]),predictionId:t.Yj().trim().min(1),tsCreated:t.Yj().datetime(),signal:t.k5(["up","down","neutral"]),confidence:t.ai().min(0).max(100),expectedMovePct:t.ai().optional(),leverage:t.ai().int().min(1).max(125).optional(),side:t.k5(["long","short"]).optional(),suggestedEntry:l.optional(),suggestedStopLoss:t.ai().positive().optional(),suggestedTakeProfit:t.ai().positive().optional(),positionSizeHint:s.optional(),tags:t.YO(t.Yj()).max(5).optional(),explanation:t.Yj().max(400).optional(),keyDrivers:t.YO(d).max(5).optional(),indicators:r});function c(e,i){let a=Number(e);if(Number.isFinite(a))return Number(a.toFixed(i))}function u(e){var i,a,t,n,l,s,d,r,u,p,h,m,v;let x=(m=e.signal,v=e.marketType,"up"===m?{side:"long"}:"down"===m?"spot"===v?{info:"Spot short not supported. Please choose a valid spot action manually."}:{side:"short"}:{}),g={exchange:e.exchange,accountId:e.accountId,symbol:e.symbol,marketType:e.marketType,timeframe:e.timeframe,predictionId:e.predictionId,tsCreated:e.tsCreated,signal:e.signal,confidence:Number.isFinite(h=e.confidence)?Math.max(0,Math.min(100,h<=1?100*h:h)):0,expectedMovePct:"number"==typeof e.expectedMovePct&&Number.isFinite(e.expectedMovePct)?Number(e.expectedMovePct.toFixed(2)):void 0,leverage:null!=(t=e.leverage)?t:void 0,side:x.side,suggestedEntry:null!=(n=e.suggestedEntry)?n:void 0,suggestedStopLoss:null!=(l=e.suggestedStopLoss)?l:void 0,suggestedTakeProfit:null!=(s=e.suggestedTakeProfit)?s:void 0,positionSizeHint:null!=(d=e.positionSizeHint)?d:void 0,tags:null!=(r=null==(i=e.tags)?void 0:i.slice(0,5))?r:void 0,explanation:null!=(u=e.explanation)?u:void 0,keyDrivers:null!=(p=null==(a=e.keyDrivers)?void 0:a.slice(0,5))?p:void 0,indicators:function(e){var i,a;if(!e)return;let t=(null==(i=e.fvg)?void 0:i.fill_rule)==="mid_touch"?"mid_touch":(null==(a=e.fvg)?void 0:a.fill_rule)==="overlap"?"overlap":void 0;return{rsi_14:c(e.rsi_14,1),macd:e.macd?{line:c(e.macd.line,4),signal:c(e.macd.signal,4),hist:c(e.macd.hist,4)}:void 0,bb:e.bb?{upper:c(e.bb.upper,4),mid:c(e.bb.mid,4),lower:c(e.bb.lower,4),width_pct:c(e.bb.width_pct,2),pos:c(e.bb.pos,3)}:void 0,vwap:e.vwap?{value:c(e.vwap.value,4),dist_pct:c(e.vwap.dist_pct,2),mode:e.vwap.mode,sessionStartUtcMs:"number"==typeof e.vwap.sessionStartUtcMs&&Number.isFinite(e.vwap.sessionStartUtcMs)?e.vwap.sessionStartUtcMs:void 0}:void 0,adx:e.adx?{adx_14:c(e.adx.adx_14,1),plus_di_14:c(e.adx.plus_di_14,1),minus_di_14:c(e.adx.minus_di_14,1)}:void 0,stochrsi:e.stochrsi?{rsi_len:c(e.stochrsi.rsi_len,0),stoch_len:c(e.stochrsi.stoch_len,0),smooth_k:c(e.stochrsi.smooth_k,0),smooth_d:c(e.stochrsi.smooth_d,0),k:c(e.stochrsi.k,1),d:c(e.stochrsi.d,1),value:c(e.stochrsi.value,1)}:void 0,volume:e.volume?{lookback:c(e.volume.lookback,0),vol_z:c(e.volume.vol_z,3),rel_vol:c(e.volume.rel_vol,3),vol_ema_fast:c(e.volume.vol_ema_fast,4),vol_ema_slow:c(e.volume.vol_ema_slow,4),vol_trend:c(e.volume.vol_trend,2)}:void 0,fvg:e.fvg?{lookback:c(e.fvg.lookback,0),fill_rule:t,open_bullish_count:c(e.fvg.open_bullish_count,0),open_bearish_count:c(e.fvg.open_bearish_count,0),nearest_bullish_gap:e.fvg.nearest_bullish_gap?{upper:c(e.fvg.nearest_bullish_gap.upper,4),lower:c(e.fvg.nearest_bullish_gap.lower,4),mid:c(e.fvg.nearest_bullish_gap.mid,4),dist_pct:c(e.fvg.nearest_bullish_gap.dist_pct,2),age_bars:c(e.fvg.nearest_bullish_gap.age_bars,0)}:void 0,nearest_bearish_gap:e.fvg.nearest_bearish_gap?{upper:c(e.fvg.nearest_bearish_gap.upper,4),lower:c(e.fvg.nearest_bearish_gap.lower,4),mid:c(e.fvg.nearest_bearish_gap.mid,4),dist_pct:c(e.fvg.nearest_bearish_gap.dist_pct,2),age_bars:c(e.fvg.nearest_bearish_gap.age_bars,0)}:void 0,last_created:e.fvg.last_created?{type:"bullish"===e.fvg.last_created.type||"bearish"===e.fvg.last_created.type?e.fvg.last_created.type:void 0,age_bars:c(e.fvg.last_created.age_bars,0)}:void 0,last_filled:e.fvg.last_filled?{type:"bullish"===e.fvg.last_filled.type||"bearish"===e.fvg.last_filled.type?e.fvg.last_filled.type:void 0,age_bars:c(e.fvg.last_filled.age_bars,0)}:void 0}:void 0}}(e.indicators)};return{payload:o.parse(g),info:x.info}}function p(e){let i=o.safeParse(e);return i.success?i.data:null}},7199:(e,i,a)=>{Promise.resolve().then(a.bind(a,9891))},9891:(e,i,a)=>{"use strict";a.r(i),a.d(i,{default:()=>F});var t=a(4568),n=a(9664),l=a.n(n),s=a(7541),d=a(7620),r=a(2883),o=a(5606);let c=/signal:(up|down|neutral)->(up|down|neutral)/i,u=/confidence_delta:([+-]?\d+(?:\.\d+)?)/i,p={scheduled_due:"Scheduled refresh",tags_changed:"Tags changed",trend_rank_bucket_changed:"Trend regime changed",vol_rank_bucket_changed:"Volatility regime changed",atr_rank_bucket_changed:"ATR regime changed",manual_create:"Manual create",bootstrap:"Bootstrap import"};function h(e){let i=e.trim();if(!i)return"";let a=p[i];return a||i.replace(/_/g," ").replace(/\s+/g," ").trim()}function m(e){let i="string"==typeof e&&e.trim().length>0?e.trim():null;if(!i)return{raw:null,kind:"unknown",label:"Unknown",shortReason:"n/a",lastChangeType:null,signalFlip:null};let a=i.match(c),t=a?{from:a[1].toLowerCase(),to:a[2].toLowerCase()}:null,n=null;i.startsWith("manual")?n="manual":i.startsWith("scheduled")?n="scheduled_checkpoint":t?n="signal_flip":i.includes("confidence_delta:")?n="confidence_jump":(i.includes("atr_rank_bucket")||i.includes("trend_rank_bucket")||i.includes("tags:")||i.includes("trigger:"))&&(n="regime_change");let l="unknown";i.startsWith("manual")?l="manual":i.startsWith("scheduled")||i.startsWith("bootstrap")?l="scheduled":(i.startsWith("trigger:")||t||i.includes("confidence_delta:")||i.includes("tags:"))&&(l="triggered");let s=function(e,i){let a=e.split(",").map(e=>e.trim()).filter(Boolean);if(0===a.length)return"n/a";let t=[];for(let e of a){if(e.startsWith("signal:")){i?t.push("Signal ".concat(i.from.toUpperCase(),"->").concat(i.to.toUpperCase())):t.push("Signal changed");continue}if(e.startsWith("confidence_delta:")){var n;t.push(null!=(n=function(e){let i=e.match(u);if(!i)return null;let a=Number(i[1]);if(!Number.isFinite(a))return"Confidence changed";let t=a>0?"+":"";return"Confidence ".concat(t).concat(a.toFixed(1))}(e))?n:"Confidence changed");continue}if(e.startsWith("trigger:")){let i=e.slice(8).trim();t.push("Trigger: ".concat(h(i)||"condition met"));continue}t.push(h(e))}return t.filter(Boolean).join(" • ")}(i,t),d=s.length>80?"".concat(s.slice(0,77),"..."):s,r="scheduled"===l?"Scheduled":"triggered"===l?"Triggered":"manual"===l?"Manual":"Unknown";return{raw:i,kind:l,label:r,shortReason:d,lastChangeType:n,signalFlip:t}}function v(e,i){if(!e)return"n/a";let a=new Date(e).getTime();if(!Number.isFinite(a))return"n/a";let t=Math.max(0,Math.floor((i-a)/1e3));if(t<10)return"just now";if(t<60)return"".concat(t,"s ago");let n=Math.floor(t/60);if(n<60)return"".concat(n,"m ago");let l=Math.floor(n/60);if(l<24)return"".concat(l,"h ago");let s=Math.floor(l/24);return s<7?"".concat(s,"d ago"):new Date(a).toLocaleDateString()}function x(e,i,a){if(!e)return!1;let t=new Date(e).getTime();return!!Number.isFinite(t)&&i-t<=a}let g=["5m","15m","1h","4h","1d"];function f(e){let i=Math.max(0,Math.floor(e/1e3)),a=Math.floor(i/3600),t=Math.floor(i%3600/60),n=i%60;return a>0?"".concat(a,"h ").concat(t,"m"):t>0?"".concat(t,"m ").concat(n,"s"):"".concat(n,"s")}function j(e,i){var a;if(!e.autoScheduleEnabled)return"disabled";let t=new Date(e.tsCreated).getTime();if(!Number.isFinite(t))return"unknown";let n=t+("5m"===(a=e.timeframe)?3e5:"15m"===a?9e5:"1h"===a?36e5:"4h"===a?144e5:864e5)-i;return n<=0?"due now":"in ".concat(f(n))}function b(e){return e instanceof r.hD?"".concat(e.message," (HTTP ").concat(e.status,")"):e&&"object"==typeof e&&"message"in e?String(e.message):String(e)}function y(e){let i=Math.max(0,Math.min(100,e<=1?100*e:e));return"".concat(i.toFixed(1),"%")}function N(e){return Math.max(0,Math.min(100,e<=1?100*e:e))}function _(e){return"up"===e?{borderColor:"#10b981",color:"#10b981"}:"down"===e?{borderColor:"#ef4444",color:"#ef4444"}:{borderColor:"#94a3b8",color:"#94a3b8"}}function S(e,i){return"closed"!==e?"pending":i||"closed"}function C(e){let i=Number(e);return Number.isFinite(i)?i:null}function w(e){let i=T(e),a="up"===i.signal||"down"===i.signal||"neutral"===i.signal?i.signal:null,t=C(i.expectedMovePct),n=C(i.confidence);return a&&null!==t&&null!==n?{signal:a,expectedMovePct:Math.max(0,Math.min(25,Math.abs(t))),confidence:Math.max(0,Math.min(1,n<=1?n:n/100))}:null}function P(e,i){return"local"===i&&e.localPrediction?e.localPrediction.signal:"ai"===i&&e.aiPrediction?e.aiPrediction.signal:e.signal}function k(e,i){return"local"===i&&e.localPrediction?e.localPrediction.confidence:"ai"===i&&e.aiPrediction?e.aiPrediction.confidence:e.confidence}function I(e,i){return"local"===i&&e.localPrediction?e.localPrediction.expectedMovePct:"ai"===i&&e.aiPrediction?e.aiPrediction.expectedMovePct:e.expectedMovePct}function R(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=C(e);return null===a?"n/a":a.toFixed(i)}function T(e){return!e||"object"!=typeof e||Array.isArray(e)?{}:e}function A(e){return e?"".concat(e.from.toUpperCase(),"->").concat(e.to.toUpperCase()):"FLIP"}function M(e){return"manual"!==e.parsedReason.kind?{label:e.parsedReason.label,shortReason:e.parsedReason.shortReason,rawReason:e.parsedReason.raw}:e.autoEnabled?{label:"Manual",shortReason:"manual (waiting for first auto refresh)",rawReason:"manual_waiting_first_auto_refresh"}:{label:"Manual",shortReason:"manual (one-off)",rawReason:"manual_one_off"}}function F(){var e,i,a,n,c,u,p,h,F,L,D,E,z,U,B,H,V,W,O;let Y=(0,s.useRouter)(),[G,q]=(0,d.useState)([]),[X,$]=(0,d.useState)(!0),[J,K]=(0,d.useState)(!1),[Q,Z]=(0,d.useState)(null),[ee,ei]=(0,d.useState)(null),[ea,et]=(0,d.useState)(null),[en,el]=(0,d.useState)(null),[es,ed]=(0,d.useState)(null),[er,eo]=(0,d.useState)(null),[ec,eu]=(0,d.useState)(null),[ep,eh]=(0,d.useState)(!0),[em,ev]=(0,d.useState)([]),[ex,eg]=(0,d.useState)(!0),[ef,ej]=(0,d.useState)(null),[eb,ey]=(0,d.useState)("all"),[eN,e_]=(0,d.useState)("30"),[eS,eC]=(0,d.useState)(!1),[ew,eP]=(0,d.useState)(!1),[ek,eI]=(0,d.useState)([]),[eR,eT]=(0,d.useState)(""),[eA,eM]=(0,d.useState)([]),[eF,eL]=(0,d.useState)(!1),[eD,eE]=(0,d.useState)(null),[ez,eU]=(0,d.useState)(""),[eB,eH]=(0,d.useState)("all"),[eV,eW]=(0,d.useState)("all"),[eO,eY]=(0,d.useState)("local"),[eG,eq]=(0,d.useState)("newest"),[eX,e$]=(0,d.useState)("BTCUSDT"),[eJ,eK]=(0,d.useState)("perp"),[eQ,eZ]=(0,d.useState)("15m"),[e0,e1]=(0,d.useState)("either"),[e4,e2]=(0,d.useState)("60"),[e6,e8]=(0,d.useState)("10"),[e5,e3]=(0,d.useState)(!0),[e9,e7]=(0,d.useState)(()=>Date.now()),[ie,ii]=(0,d.useState)(null),[ia,it]=(0,d.useState)({}),[il,is]=(0,d.useState)(null),[id,ir]=(0,d.useState)(null),[io,ic]=(0,d.useState)({}),[iu,ip]=(0,d.useState)(null),[ih,im]=(0,d.useState)({}),[iv,ix]=(0,d.useState)({});async function ig(){$(!0),Z(null);try{let e=await (0,r.Vg)("/api/predictions?limit=100");q(Array.isArray(e.items)?e.items.map(e=>({...e,localPrediction:w(e.localPrediction),aiPrediction:w(e.aiPrediction)})):[])}catch(e){Z(b(e))}finally{$(!1)}}async function ij(){eg(!0);try{let e=await (0,r.Vg)("/api/predictions/running");ev(Array.isArray(e.items)?e.items:[])}catch(e){ev([])}finally{eg(!1)}}async function ib(){try{let e=await (0,r.Vg)("/api/predictions/quality");ed(e)}catch(e){ed(null)}}async function iy(){try{let e=await (0,r.Vg)("/api/predictions/metrics?bins=10");eo(e)}catch(e){eo(null)}}async function iN(){eh(!0);try{let e=await (0,r.Vg)("/api/predictions/activity");eu(e)}catch(e){eu(null)}finally{eh(!1)}}async function i_(){try{let e=await (0,r.Vg)("/exchange-accounts"),i=Array.isArray(e.items)?e.items:[];if(eI(i),0===i.length)return void eT("");eT(e=>e&&i.some(i=>i.id===e)?e:i[0].id)}catch(e){eI([]),eT("")}}async function iS(e){eL(!0),eE(null);try{let a=await (0,r.Vg)("/api/symbols?exchangeAccountId=".concat(encodeURIComponent(e))),t=Array.isArray(a.items)?a.items:[];if(eM(t),t.length>0&&!t.some(e=>e.symbol===eX)){var i;let e=null!=(i=t.find(e=>e.tradable))?i:t[0];(null==e?void 0:e.symbol)&&e$(e.symbol)}}catch(e){eM([]),eE(b(e))}finally{eL(!1)}}(0,d.useEffect)(()=>{ig(),ij(),ib(),iy(),iN(),i_()},[]),(0,d.useEffect)(()=>{if(!eR)return void eM([]);iS(eR)},[eR]),(0,d.useEffect)(()=>{let e=setInterval(()=>e7(Date.now()),1e3);return()=>clearInterval(e)},[]);let iC=(0,d.useMemo)(()=>{let e=ez.trim().toUpperCase(),i=G.filter(i=>(!e||!!i.symbol.toUpperCase().includes(e))&&("all"===eB||P(i,eO)===eB)&&("all"===eV||i.timeframe===eV));return i.sort((e,i)=>"confidence"===eG?(1>=k(i,eO)?100*k(i,eO):k(i,eO))-(1>=k(e,eO)?100*k(e,eO):k(e,eO)):"move"===eG?Math.abs(I(i,eO))-Math.abs(I(e,eO)):new Date(i.tsCreated).getTime()-new Date(e.tsCreated).getTime()),i},[eB,ez,eV,G,eO,eG]),iw=(0,d.useMemo)(()=>"all"===eb?em:em.filter(e=>"paused"===eb?e.paused:!e.paused),[em,eb]);async function iP(e){ei(null),el(null),et(e);try{var i,a;let t=await (0,r.Vg)("/api/predictions/".concat(e)),n=G.find(i=>i.id===e),l=null!=(i=null==n?void 0:n.localPrediction)?i:w(T(t.featureSnapshot).localPrediction),s=null!=(a=null==n?void 0:n.aiPrediction)?a:w(T(t.featureSnapshot).aiPrediction);if(!t.accountId)throw Error("No exchange account available for this prediction.");let d="ai"===eO&&s?{...t,signal:s.signal,confidence:s.confidence,expectedMovePct:s.expectedMovePct}:"local"===eO&&l?{...t,signal:l.signal,confidence:l.confidence,expectedMovePct:l.expectedMovePct}:t,c=(0,o.i4)(d);sessionStorage.setItem(o.xf,JSON.stringify(c.payload)),c.info&&el(c.info);let u=new URLSearchParams({prefill:"1",exchangeAccountId:c.payload.accountId});Y.push("/trading-desk?".concat(u.toString()))}catch(e){ei(b(e))}finally{et(null)}}async function ik(e){if(ir(null),ie===e)return void ii(null);if(ii(e),!ia[e]){is(e);try{let i=await (0,r.Vg)("/api/predictions/".concat(e));it(a=>({...a,[e]:i}))}catch(e){ir(b(e))}finally{is(null)}}}async function iI(e){if(!io[e]){ip(e),im(i=>({...i,[e]:null}));try{let i=await (0,r.Vg)("/api/predictions/events?stateId=".concat(encodeURIComponent(e),"&limit=10"));ic(a=>({...a,[e]:Array.isArray(i.items)?i.items:[]}))}catch(i){im(i=>({...i,[e]:"Unable to load events."}))}finally{ip(null)}}}async function iR(){ei(null),el(null);let e=eX.trim().toUpperCase(),i=Number(e4),a=Number(e6);if(!eR)return void ei("Please select an exchange account first.");if(!e)return void ei("Please select a pair.");if(!Number.isFinite(i)||i<0||i>100)return void ei("Confidence target must be between 0 and 100.");if("perp"===eJ&&(!Number.isFinite(a)||a<1||a>125))return void ei("Leverage must be between 1 and 125 for futures.");K(!0);try{let t=await (0,r.$P)("/api/predictions/generate-auto",{exchangeAccountId:eR,symbol:e,marketType:eJ,timeframe:eQ,directionPreference:e0,confidenceTargetPct:i,leverage:"perp"===eJ?Math.trunc(a):void 0,autoSchedule:e5});el("Prediction created for ".concat(e," (").concat(eQ,") with signal ").concat(t.prediction.signal," ")+"and confidence ".concat(y(t.prediction.confidence),".")+(e5?" Auto mode is enabled (".concat(eQ," cadence)."):" Auto mode is disabled.")),await Promise.all([ig(),ij(),ib(),iy(),iN()])}catch(e){ei(b(e))}finally{K(!1)}}async function iT(e){ei(null),el(null),ej(e.id);try{let i=!e.paused,a=await (0,r.$P)("/api/predictions/".concat(e.id,"/pause"),{paused:i});el(a.paused?"Prediction paused (".concat(a.updatedCount," template rows updated)."):"Prediction resumed (".concat(a.updatedCount," template rows updated).")),await Promise.all([ig(),ij(),ib(),iy(),iN()])}catch(e){ei(b(e))}finally{ej(null)}}async function iA(e){if(window.confirm("Delete this auto-prediction schedule and related template rows? This cannot be undone.")){ei(null),el(null),ej(e);try{let i=await (0,r.$P)("/api/predictions/".concat(e,"/delete-schedule"),{});el("Auto prediction deleted (".concat(i.deletedCount," rows removed).")),await Promise.all([ig(),ij(),ib(),iy(),iN()])}catch(e){ei(b(e))}finally{ej(null)}}}async function iM(){let e=Number(eN);if(!Number.isFinite(e)||e<1||e>3650)return void ei("Please enter a valid day count between 1 and 3650.");if(window.confirm("Delete predictions older than ".concat(Math.trunc(e)," day(s)? Active auto templates will be kept."))){ei(null),el(null),eC(!0);try{let i=await (0,r.$P)("/api/predictions/clear-old",{olderThanDays:Math.trunc(e),keepRunningTemplates:!0});el("Cleared ".concat(i.deletedCount," old prediction(s) older than ").concat(i.olderThanDays," day(s). ")+"Preserved running templates: ".concat(i.preservedCount,".")),await Promise.all([ig(),ij(),ib(),iy(),iN()])}catch(e){ei(b(e))}finally{eC(!1)}}}async function iF(){if(0===iC.length)return void ei("No filtered predictions to delete.");if(window.confirm("Delete ".concat(iC.length," currently listed prediction(s)?"))){ei(null),el(null),eP(!0);try{let e=await (0,r.$P)("/api/predictions/delete-many",{ids:iC.map(e=>e.id)});el("Deleted ".concat(e.deletedCount," listed prediction(s).")),await Promise.all([ig(),ij(),ib(),iy(),iN()])}catch(e){ei(b(e))}finally{eP(!1)}}}function iL(e){var i,a,n,l,s,d,r,o,c,u,p,h,g,f,j,b,N,_,S,P,k,I,F,L,D,E,z,U,B,H,V,W,O,Y,G,q,X,$,J,K;let Q=e.id,Z=ia[Q],ee=null!=(z=null==Z?void 0:Z.indicators)?z:null,ei=T(null==Z?void 0:Z.featureSnapshot),ea=null!=(U=e.localPrediction)?U:w(ei.localPrediction),et=null!=(B=e.aiPrediction)?B:w(ei.aiPrediction),en="ai"===eO&&et?et.signal:"local"===eO&&ea?ea.signal:e.signal,el="ai"===eO&&et?et.confidence:"local"===eO&&ea?ea.confidence:e.confidence,es="ai"===eO&&et?et.expectedMovePct:"local"===eO&&ea?ea.expectedMovePct:e.expectedMovePct,ed=il===Q,er=!!((null==ee?void 0:ee.dataGap)||(null==Z||null==(i=Z.riskFlags)?void 0:i.dataGap)),eo=null!=(H=e.lastUpdatedAt)?H:e.tsCreated,ec=m(null!=(V=e.lastChangeReason)?V:null),eu=M({parsedReason:ec,autoEnabled:!!e.autoScheduleEnabled}),ep=null!=(O=null!=(W=io[Q])?W:null==Z?void 0:Z.events)?O:[],eh=!!iv[Q],em=iu===Q,ev=null!=(Y=ih[Q])?Y:null,ex=null!=(G=null==Z?void 0:Z.realized)?G:null,eg=T(null==ex?void 0:ex.errorMetrics),ef="number"==typeof e.realizedReturnPct?e.realizedReturnPct:C(null==ex?void 0:ex.realizedReturnPct),ej=null!=(q=e.realizedEvaluatedAt)?q:"string"==typeof(null==ex?void 0:ex.evaluatedAt)?ex.evaluatedAt:null,eb="boolean"==typeof e.realizedHit?e.realizedHit:function(e){if("boolean"==typeof e)return e;if("number"==typeof e&&Number.isFinite(e))return e>0;if("string"==typeof e){let i=e.trim().toLowerCase();if("true"===i||"1"===i||"hit"===i)return!0;if("false"===i||"0"===i||"miss"===i)return!1}return null}(eg.hit),ey="number"==typeof e.realizedAbsError?e.realizedAbsError:C(eg.absError),eN="number"==typeof e.realizedSqError?e.realizedSqError:C(eg.sqError),e_="triggered"===ec.kind?"predictionReasonBadgeTrigger":"scheduled"===ec.kind?"predictionReasonBadgeScheduled":"manual"===ec.kind?"predictionReasonBadgeManual":"predictionReasonBadgeUnknown";return ed&&!Z?(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:13},children:"Loading prediction details..."}):(0,t.jsxs)("div",{className:"predictionDetailStack",children:[(0,t.jsxs)("div",{className:"card predictionDetailPanel",children:[(0,t.jsx)("div",{className:"predictionDetailHeader",children:(0,t.jsx)("strong",{children:"Prediction Context"})}),(0,t.jsxs)("div",{className:"predictionContextRow",children:[(0,t.jsx)("span",{className:"badge ".concat(e_),children:eu.label}),ec.signalFlip?(0,t.jsxs)("span",{className:"badge predictionFlipBadge",children:["FLIP ",A(ec.signalFlip)]}):null,(0,t.jsxs)("span",{className:"predictionUpdateMeta ".concat(x(eo,e9,12e4)?"predictionUpdateMetaFresh":""),title:eo?new Date(eo).toLocaleString():"n/a",children:["Last updated ",v(eo,e9)]})]}),(0,t.jsxs)("div",{className:"predictionContextReason",children:["Reason: ",eu.shortReason]}),(0,t.jsxs)("div",{className:"predictionContextReason",children:["Signal source: ","ai"===eO?"AI":"Local","ai"!==eO||et?"":" (AI value unavailable, using local)"]}),er?(0,t.jsx)("span",{className:"predictionDetailWarning",children:"Data gap detected"}):null,(0,t.jsxs)("div",{className:"predictionIndicatorGrid",children:[(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"Selected signal"}),(0,t.jsx)("div",{className:"predictionIndicatorValue",children:en}),(0,t.jsxs)("div",{className:"predictionIndicatorMeta",children:["conf ",y(el)," \xb7 move ",es.toFixed(2),"%"]})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"Local vs AI signal"}),(0,t.jsxs)("div",{className:"predictionIndicatorValue",children:[null!=(X=null==ea?void 0:ea.signal)?X:e.signal," / ",null!=($=null==et?void 0:et.signal)?$:"n/a"]}),(0,t.jsxs)("div",{className:"predictionIndicatorMeta",children:["local ",y(null!=(J=null==ea?void 0:ea.confidence)?J:e.confidence)," \xb7 ai ",et?y(et.confidence):"n/a"]})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"Evaluated"}),(0,t.jsx)("div",{className:"predictionIndicatorValue",children:ej?"yes":"no"}),(0,t.jsx)("div",{className:"predictionIndicatorMeta",children:ej?"at ".concat(new Date(ej).toLocaleString()):"horizon not elapsed yet"})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"Realized return %"}),(0,t.jsx)("div",{className:"predictionIndicatorValue",children:R(ef,4)})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"Directional hit"}),(0,t.jsx)("div",{className:"predictionIndicatorValue",children:null===eb?"n/a":eb?"hit":"miss"})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"Abs error"}),(0,t.jsx)("div",{className:"predictionIndicatorValue",children:R(ey,4)})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"Sq error"}),(0,t.jsx)("div",{className:"predictionIndicatorValue",children:R(eN,4)})]}),ee?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"RSI (14)"}),(0,t.jsx)("div",{className:"predictionIndicatorValue",children:R(ee.rsi_14,2)})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"MACD (line / signal / hist)"}),(0,t.jsxs)("div",{className:"predictionIndicatorValue",children:[R(null==(a=ee.macd)?void 0:a.line,4)," / ",R(null==(n=ee.macd)?void 0:n.signal,4)," / ",R(null==(l=ee.macd)?void 0:l.hist,4)]})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"Bollinger (width% / pos)"}),(0,t.jsxs)("div",{className:"predictionIndicatorValue",children:[R(null==(s=ee.bb)?void 0:s.width_pct,2)," / ",R(null==(d=ee.bb)?void 0:d.pos,3)]})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"VWAP (value / dist%)"}),(0,t.jsxs)("div",{className:"predictionIndicatorValue",children:[R(null==(r=ee.vwap)?void 0:r.value,2)," / ",R(null==(o=ee.vwap)?void 0:o.dist_pct,2)]}),(0,t.jsxs)("div",{className:"predictionIndicatorMeta",children:["mode: ",null!=(K=null==(c=ee.vwap)?void 0:c.mode)?K:"n/a"]})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"ADX (ADX / +DI / -DI)"}),(0,t.jsxs)("div",{className:"predictionIndicatorValue",children:[R(null==(u=ee.adx)?void 0:u.adx_14,2)," / ",R(null==(p=ee.adx)?void 0:p.plus_di_14,2)," / ",R(null==(h=ee.adx)?void 0:h.minus_di_14,2)]})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"StochRSI (%K / %D / value)"}),(0,t.jsxs)("div",{className:"predictionIndicatorValue",children:[R(null==(g=ee.stochrsi)?void 0:g.k,1)," / ",R(null==(f=ee.stochrsi)?void 0:f.d,1)," / ",R(null==(j=ee.stochrsi)?void 0:j.value,1)]})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"Volume (z / rel / trend%)"}),(0,t.jsxs)("div",{className:"predictionIndicatorValue",children:[R(null==(b=ee.volume)?void 0:b.vol_z,3)," / ",R(null==(N=ee.volume)?void 0:N.rel_vol,3)," / ",R(null==(_=ee.volume)?void 0:_.vol_trend,2)]}),(0,t.jsxs)("div",{className:"predictionIndicatorMeta",children:["EMA fast/slow: ",R(null==(S=ee.volume)?void 0:S.vol_ema_fast,2)," / ",R(null==(P=ee.volume)?void 0:P.vol_ema_slow,2)]})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"FVG (open bull / bear)"}),(0,t.jsxs)("div",{className:"predictionIndicatorValue",children:[R(null==(k=ee.fvg)?void 0:k.open_bullish_count,0)," / ",R(null==(I=ee.fvg)?void 0:I.open_bearish_count,0)]}),(0,t.jsxs)("div",{className:"predictionIndicatorMeta",children:["bull dist: ",R(null==(L=ee.fvg)||null==(F=L.nearest_bullish_gap)?void 0:F.dist_pct,2),"% \xb7 bear dist: ",R(null==(E=ee.fvg)||null==(D=E.nearest_bearish_gap)?void 0:D.dist_pct,2),"%"]})]}),(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"ATR %"}),(0,t.jsx)("div",{className:"predictionIndicatorValue",children:R(ee.atr_pct,4)})]})]}):(0,t.jsxs)("div",{className:"card predictionIndicatorCard",children:[(0,t.jsx)("div",{className:"predictionIndicatorTitle",children:"Indicators"}),(0,t.jsx)("div",{className:"predictionIndicatorValue",children:"n/a"}),(0,t.jsx)("div",{className:"predictionIndicatorMeta",children:"No indicator data for this prediction."})]})]})]}),(0,t.jsxs)("div",{className:"card predictionDetailPanel",children:[(0,t.jsxs)("div",{className:"predictionDetailHeader",children:[(0,t.jsx)("strong",{children:"Recent Changes"}),(0,t.jsxs)("button",{className:"btn predictionMiniBtn",type:"button",onClick:()=>(function(e){let i=!iv[e];ix(a=>({...a,[e]:i})),i&&iI(e)})(Q),children:[eh?"Hide":"Show"," (",ep.length,")"]})]}),eh?em?(0,t.jsx)("div",{style:{color:"var(--muted)",marginTop:8},children:"Loading event log..."}):ev?(0,t.jsx)("div",{style:{color:"var(--muted)",marginTop:8},children:ev}):0===ep.length?(0,t.jsx)("div",{style:{color:"var(--muted)",marginTop:8},children:"No recent changes recorded."}):(0,t.jsx)("div",{className:"predictionEventList",children:ep.map(e=>{var i;return(0,t.jsxs)("div",{className:"predictionEventItem",children:[(0,t.jsxs)("div",{className:"predictionEventHeader",children:[(0,t.jsx)("span",{className:"badge",children:e.changeType}),(0,t.jsx)("span",{className:"predictionEventTimestamp",title:e.tsCreated?new Date(e.tsCreated).toLocaleString():"n/a",children:v(e.tsCreated,e9)})]}),(0,t.jsx)("div",{className:"predictionEventReason",children:null!=(i=e.reason)?i:"n/a"}),(0,t.jsx)("div",{className:"predictionEventDelta",children:function(e){if(!e||"object"!=typeof e)return"No delta data";let i=[],a="string"==typeof e.signal?e.signal:null;a&&i.push("signal ".concat(a));let t=C(e.confidenceDelta);if(null!==t){let e=t>=0?"+":"";i.push("confidence ".concat(e).concat(t.toFixed(2)))}let n=Array.isArray(e.tagsAdded)?e.tagsAdded.map(e=>String(e)).filter(Boolean):[];n.length>0&&i.push("+".concat(n.join(", ")));let l=Array.isArray(e.tagsRemoved)?e.tagsRemoved.map(e=>String(e)).filter(Boolean):[];return(l.length>0&&i.push("-".concat(l.join(", "))),0===i.length)?"No delta data":i.join(" | ")}(e.delta)})]},e.id)})}):(0,t.jsx)("div",{style:{color:"var(--muted)",marginTop:8},children:"Expand to see the last refresh events."})]})]})}let iD=M({parsedReason:m(null!=(h=null==ec?void 0:ec.user.latestStateReason)?h:null),autoEnabled:(null!=(F=null==ec?void 0:ec.user.activeSchedules)?F:0)>0}),iE=null!=(L=null==ec?void 0:ec.user.activeSchedules)?L:0,iz=Number.isFinite(Number(null==ec?void 0:ec.user.staleAfterMs))?Number(null==ec?void 0:ec.user.staleAfterMs):9e5,iU=null!=(D=null==ec?void 0:ec.user.latestSignalCalculatedAt)?D:null,iB=iE>0&&!x(iU,e9,Math.max(iz,6e4)),iH=ec?ec.scheduler.enabled?ec.scheduler.running?"running":"idle":"disabled":"unknown",iV=ec&&ec.scheduler.enabled?iB?"predictionHealthBadgeWarn":"predictionHealthBadgeOk":"predictionHealthBadgeIdle";return(0,t.jsxs)("div",{className:"predictionsWrap",children:[(0,t.jsxs)("div",{className:"dashboardHeader",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{margin:0},children:"Ai Predictions"}),(0,t.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:"Select a prediction and prefill the Manual Trading Desk ticket."})]}),(0,t.jsxs)("div",{className:"predictionsHeaderActions",children:[(0,t.jsx)(l(),{href:"/dashboard",className:"btn",children:"Dashboard"}),(0,t.jsx)(l(),{href:"/trade",className:"btn",children:"Manual Trading"})]})]}),(0,t.jsxs)("section",{className:"card predictionsSection",children:[(0,t.jsx)("div",{className:"predictionCreateTitle",children:"Create Prediction (Local)"}),(0,t.jsxs)("div",{className:"predictionCreateGrid",children:[(0,t.jsxs)("label",{className:"predictionCreateField",children:[(0,t.jsx)("div",{className:"predictionCreateLabel",children:"Exchange account"}),(0,t.jsx)("div",{className:"predictionCreateHint",children:"Welcher Account sp\xe4ter beim Trading-Prefill genutzt wird."}),(0,t.jsx)("select",{className:"input",value:eR,onChange:e=>eT(e.target.value),disabled:0===ek.length,children:0===ek.length?(0,t.jsx)("option",{value:"",children:"No account available"}):ek.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.exchange.toUpperCase()," - ",e.label]},e.id))})]}),(0,t.jsxs)("label",{className:"predictionCreateField",children:[(0,t.jsx)("div",{className:"predictionCreateLabel",children:"Pair"}),(0,t.jsx)("div",{className:"predictionCreateHint",children:"Handelspaar f\xfcr die Vorhersage (aus Exchange-Symbolen)."}),(0,t.jsx)("select",{className:"input",value:eX,onChange:e=>e$(e.target.value),disabled:eF||0===eA.length,children:eF?(0,t.jsx)("option",{value:"",children:"Loading pairs..."}):0===eA.length?(0,t.jsx)("option",{value:"",children:"No pair available"}):eA.map(e=>(0,t.jsxs)("option",{value:e.symbol,children:[e.symbol," ",e.tradable?"":"(restricted)"]},e.symbol))})]}),(0,t.jsxs)("label",{className:"predictionCreateField",children:[(0,t.jsx)("div",{className:"predictionCreateLabel",children:"Market type"}),(0,t.jsx)("div",{className:"predictionCreateHint",children:"Spot oder Perpetual f\xfcr die Interpretation."}),(0,t.jsxs)("select",{className:"input",value:eJ,onChange:e=>eK(e.target.value),children:[(0,t.jsx)("option",{value:"perp",children:"perp"}),(0,t.jsx)("option",{value:"spot",children:"spot"})]})]}),(0,t.jsxs)("label",{className:"predictionCreateField",children:[(0,t.jsx)("div",{className:"predictionCreateLabel",children:"Timeframe"}),(0,t.jsx)("div",{className:"predictionCreateHint",children:"Zeithorizont der Prognose."}),(0,t.jsx)("select",{className:"input",value:eQ,onChange:e=>eZ(e.target.value),children:g.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("label",{className:"predictionCreateField",children:[(0,t.jsx)("div",{className:"predictionCreateLabel",children:"Direction preference"}),(0,t.jsx)("div",{className:"predictionCreateHint",children:"Optional: long only, short only oder egal."}),(0,t.jsxs)("select",{className:"input",value:e0,onChange:e=>e1(e.target.value),children:[(0,t.jsx)("option",{value:"either",children:"either (egal)"}),(0,t.jsx)("option",{value:"long",children:"long preferred"}),(0,t.jsx)("option",{value:"short",children:"short preferred"})]})]}),(0,t.jsxs)("label",{className:"predictionCreateField",children:[(0,t.jsx)("div",{className:"predictionCreateLabel",children:"Confidence target (%)"}),(0,t.jsx)("div",{className:"predictionCreateHint",children:"Mindest-Confidence f\xfcr ein klares Long/Short Signal."}),(0,t.jsx)("input",{className:"input",type:"number",step:"1",min:"0",max:"100",value:e4,onChange:e=>e2(e.target.value),placeholder:"60"})]}),(0,t.jsxs)("label",{className:"predictionCreateField",children:[(0,t.jsx)("div",{className:"predictionCreateLabel",children:"Leverage (futures)"}),(0,t.jsx)("div",{className:"predictionCreateHint",children:"Wird als Futures-Hinweis im Ticket \xfcbernommen."}),(0,t.jsx)("input",{className:"input",type:"number",step:"1",min:"1",max:"125",value:e6,onChange:e=>e8(e.target.value),placeholder:"10",disabled:"perp"!==eJ})]}),(0,t.jsxs)("label",{className:"predictionCreateField",style:{justifyContent:"flex-end"},children:[(0,t.jsx)("div",{className:"predictionCreateLabel",children:"Auto schedule"}),(0,t.jsx)("div",{className:"predictionCreateHint",children:"Erstellt automatisch neue Predictions im gew\xe4hlten Timeframe."}),(0,t.jsx)("div",{className:"card",style:{margin:0},children:(0,t.jsxs)("label",{className:"predictionAutoToggle",children:[(0,t.jsx)("input",{type:"checkbox",checked:e5,onChange:e=>e3(e.target.checked)}),(0,t.jsx)("span",{style:{fontSize:13},children:e5?"Enabled":"Disabled"})]})})]})]}),eD?(0,t.jsxs)("div",{style:{marginTop:8,fontSize:12,color:"#f59e0b"},children:["Pairs konnten nicht geladen werden: ",eD]}):null,(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("button",{className:"btn btnPrimary",type:"button",disabled:J,onClick:()=>void iR(),children:J?"Creating...":"Create Prediction"})})]}),(0,t.jsxs)("section",{className:"card predictionsSection",children:[(0,t.jsxs)("div",{className:"predictionsQualityGrid",children:[(0,t.jsxs)("div",{className:"card",style:{margin:0,padding:10},children:[(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"Evaluated Signals"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:800},children:null!=(E=null==es?void 0:es.sampleSize)?E:0})]}),(0,t.jsxs)("div",{className:"card",style:{margin:0,padding:10},children:[(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"TP Win Rate"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:800},children:(null==es?void 0:es.winRatePct)!==null&&(null==es?void 0:es.winRatePct)!==void 0?"".concat(es.winRatePct.toFixed(2),"%"):"-"})]}),(0,t.jsxs)("div",{className:"card",style:{margin:0,padding:10},children:[(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"Avg Outcome PnL"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:800},children:(null==es?void 0:es.avgOutcomePnlPct)!==null&&(null==es?void 0:es.avgOutcomePnlPct)!==void 0?"".concat(es.avgOutcomePnlPct.toFixed(2),"%"):"-"})]}),(0,t.jsxs)("div",{className:"card",style:{margin:0,padding:10},children:[(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"TP / SL / Expired"}),(0,t.jsxs)("div",{style:{fontSize:16,fontWeight:700},children:[null!=(z=null==es?void 0:es.tp)?z:0," / ",null!=(U=null==es?void 0:es.sl)?U:0," / ",null!=(B=null==es?void 0:es.expired)?B:0]})]}),(0,t.jsxs)("div",{className:"card",style:{margin:0,padding:10},children:[(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"Directional Hit Rate"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:800},children:(null==er?void 0:er.hitRate)!==null&&(null==er?void 0:er.hitRate)!==void 0?"".concat(er.hitRate.toFixed(2),"%"):"-"}),(0,t.jsxs)("div",{style:{color:"var(--muted)",fontSize:11},children:["Evaluated: ",null!=(H=null==er?void 0:er.evaluatedCount)?H:0]})]}),(0,t.jsxs)("div",{className:"card",style:{margin:0,padding:10},children:[(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"MAE (Move %)"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:800},children:(null==er?void 0:er.mae)!==null&&(null==er?void 0:er.mae)!==void 0?er.mae.toFixed(4):"-"})]}),(0,t.jsxs)("div",{className:"card",style:{margin:0,padding:10},children:[(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"MSE"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:800},children:(null==er?void 0:er.mse)!==null&&(null==er?void 0:er.mse)!==void 0?er.mse.toFixed(4):"-"})]}),(0,t.jsxs)("div",{className:"card",style:{margin:0,padding:10},children:[(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"24h Hit Rate Local / AI"}),(0,t.jsx)("div",{style:{fontSize:18,fontWeight:800},children:(null==es||null==(e=es.comparison24h)?void 0:e.localHitRatePct)!==null&&(null==es||null==(i=es.comparison24h)?void 0:i.localHitRatePct)!==void 0&&(null==es||null==(a=es.comparison24h)?void 0:a.aiHitRatePct)!==null&&(null==es||null==(n=es.comparison24h)?void 0:n.aiHitRatePct)!==void 0?"".concat(es.comparison24h.localHitRatePct.toFixed(2),"% / ").concat(es.comparison24h.aiHitRatePct.toFixed(2),"%"):"-"}),(0,t.jsxs)("div",{style:{color:"var(--muted)",fontSize:11},children:["Δ AI-Local: ",(null==es||null==(c=es.comparison24h)?void 0:c.deltaAiVsLocalPct)!==null&&(null==es||null==(u=es.comparison24h)?void 0:u.deltaAiVsLocalPct)!==void 0?"".concat(es.comparison24h.deltaAiVsLocalPct>=0?"+":"").concat(es.comparison24h.deltaAiVsLocalPct.toFixed(2)," pp"):"n/a"," \xb7 N=",null!=(V=null==es||null==(p=es.comparison24h)?void 0:p.sampleSize)?V:0]})]}),(0,t.jsxs)("div",{className:"card predictionActivityCard",style:{margin:0,padding:10},children:[(0,t.jsxs)("div",{className:"predictionActivityHeader",children:[(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"AI Refresh"}),(0,t.jsx)("span",{className:"badge ".concat(iV),children:ep?"loading":iH})]}),(0,t.jsxs)("div",{className:"predictionActivityLine",children:[(0,t.jsx)("span",{children:"Last calc"}),(0,t.jsx)("strong",{title:iU?new Date(iU).toLocaleString():"n/a",children:ep?"...":v(iU,e9)})]}),(0,t.jsxs)("div",{className:"predictionActivityLine",children:[(0,t.jsx)("span",{children:"Last cycle"}),(0,t.jsx)("strong",{title:(null==ec?void 0:ec.scheduler.lastCycleFinishedAt)?new Date(ec.scheduler.lastCycleFinishedAt).toLocaleString():"n/a",children:ep?"...":v(null!=(W=null==ec?void 0:ec.scheduler.lastCycleFinishedAt)?W:null,e9)})]}),(0,t.jsxs)("div",{className:"predictionActivityLine",children:[(0,t.jsx)("span",{children:"Reason"}),(0,t.jsx)("strong",{title:null!=(O=iD.rawReason)?O:"n/a",children:ep?"...":iD.shortReason})]}),iB?(0,t.jsxs)("div",{className:"predictionActivityWarning",children:["No fresh signal calculation in ",Math.ceil(iz/6e4),"m."]}):null]})]}),(0,t.jsxs)("div",{className:"predictionCalibrationWrap",children:[(0,t.jsxs)("div",{className:"predictionCalibrationHeader",children:[(0,t.jsx)("strong",{children:"Confidence Calibration (10 bins)"}),(0,t.jsx)("span",{style:{color:"var(--muted)",fontSize:12},children:"predicted confidence vs. empirical accuracy"})]}),er&&0!==er.calibrationBins.filter(e=>e.n>0).length?(0,t.jsx)("div",{className:"predictionCalibrationTableWrap",children:(0,t.jsxs)("table",{className:"predictionCalibrationTable",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Bin"}),(0,t.jsx)("th",{children:"Avg conf"}),(0,t.jsx)("th",{children:"Accuracy"}),(0,t.jsx)("th",{children:"N"})]})}),(0,t.jsx)("tbody",{children:er.calibrationBins.filter(e=>e.n>0).map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{children:[e.binFrom.toFixed(0),"-",e.binTo.toFixed(0),"%"]}),(0,t.jsx)("td",{children:null!==e.avgConf?"".concat(e.avgConf.toFixed(2),"%"):"-"}),(0,t.jsx)("td",{children:null!==e.accuracy?"".concat(e.accuracy.toFixed(2),"%"):"-"}),(0,t.jsx)("td",{children:e.n})]},"".concat(e.binFrom,"-").concat(e.binTo)))})]})}):(0,t.jsx)("div",{className:"predictionCalibrationEmpty",children:"No evaluated bins yet."})]})]}),(0,t.jsxs)("section",{className:"card predictionsSection",children:[(0,t.jsxs)("div",{className:"predictionsRunningHeader",children:[(0,t.jsxs)("div",{style:{fontWeight:700},children:["Running Auto Predictions (",iw.length,"/",em.length,")"]}),(0,t.jsxs)("div",{className:"predictionsRunningActions",children:[(0,t.jsxs)("select",{className:"input",value:eb,onChange:e=>ey(e.target.value),style:{minWidth:150},children:[(0,t.jsx)("option",{value:"all",children:"Status: all"}),(0,t.jsx)("option",{value:"running",children:"Status: running"}),(0,t.jsx)("option",{value:"paused",children:"Status: paused"})]}),(0,t.jsx)("button",{className:"btn",type:"button",onClick:()=>{Promise.all([ij(),iN()])},disabled:ex,children:ex?"Refreshing...":"Refresh"})]})]}),ex?(0,t.jsx)("div",{style:{color:"var(--muted)"},children:"Loading running schedules…"}):0===em.length?(0,t.jsxs)("div",{style:{color:"var(--muted)"},children:["No running auto-predictions. Enable ",(0,t.jsx)("code",{children:"Auto schedule"})," when creating a prediction."]}):0===iw.length?(0,t.jsx)("div",{style:{color:"var(--muted)"},children:"No entries for selected status filter."}):(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{textAlign:"left",color:"var(--muted)"},children:[(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Pair"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"TF"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Market"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Account"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Prefs"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Status"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Next run"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Actions"})]})}),(0,t.jsx)("tbody",{children:iw.map(e=>(0,t.jsxs)("tr",{style:{borderTop:"1px solid rgba(255,255,255,.06)"},children:[(0,t.jsx)("td",{style:{padding:"8px 6px",fontWeight:700},children:e.symbol}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:e.timeframe}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:e.marketType}),(0,t.jsxs)("td",{style:{padding:"8px 6px"},children:[e.exchange.toUpperCase()," - ",e.label]}),(0,t.jsxs)("td",{style:{padding:"8px 6px"},children:["Dir: ",e.directionPreference,", conf: ",e.confidenceTargetPct,"%","perp"===e.marketType&&e.leverage?", lev: ".concat(e.leverage,"x"):""]}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:e.paused?"paused":"running"}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:e.paused?"paused":e.dueInSec<=0?"due now":"in ".concat(f(1e3*e.dueInSec))}),(0,t.jsxs)("td",{style:{padding:"8px 6px",display:"flex",gap:6,flexWrap:"wrap"},children:[(0,t.jsx)("button",{className:"btn",type:"button",disabled:ef===e.id,onClick:()=>void iT(e),children:e.paused?"Resume":"Pause prediction"}),(0,t.jsx)("button",{className:"btn",type:"button",disabled:ef===e.id,onClick:()=>void iA(e.id),children:"Delete"})]})]},e.id))})]})}),(0,t.jsxs)("div",{className:"predictionsCleanupRow",children:[(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,t.jsx)("span",{style:{color:"var(--muted)",fontSize:12},children:"Older than (days)"}),(0,t.jsx)("input",{className:"input",type:"number",min:"1",max:"3650",step:"1",value:eN,onChange:e=>e_(e.target.value),style:{width:120}})]}),(0,t.jsx)("button",{className:"btn",type:"button",disabled:eS,onClick:()=>void iM(),children:eS?"Clearing...":"Clear old predictions"}),(0,t.jsx)("span",{style:{color:"var(--muted)",fontSize:12},children:"Deletes historical rows but keeps active schedule templates."})]})]}),Q?(0,t.jsxs)("div",{className:"card",style:{padding:12,borderColor:"#ef4444",marginBottom:12},children:[(0,t.jsx)("strong",{children:"Load error:"})," ",Q]}):null,ee?(0,t.jsxs)("div",{className:"card",style:{padding:12,borderColor:"#ef4444",marginBottom:12},children:[(0,t.jsx)("strong",{children:"Action failed:"})," ",ee]}):null,id?(0,t.jsxs)("div",{className:"card",style:{padding:12,borderColor:"#ef4444",marginBottom:12},children:[(0,t.jsx)("strong",{children:"Detail load failed:"})," ",id]}):null,en?(0,t.jsxs)("div",{className:"card",style:{padding:12,borderColor:"#f59e0b",marginBottom:12},children:[(0,t.jsx)("strong",{children:"Notice:"})," ",en]}):null,(0,t.jsx)("section",{className:"card predictionsSection",children:(0,t.jsxs)("div",{className:"predictionsFiltersGrid",children:[(0,t.jsx)("input",{className:"input",placeholder:"Filter symbol...",value:ez,onChange:e=>eU(e.target.value)}),(0,t.jsxs)("select",{className:"input",value:eB,onChange:e=>eH(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"All signals"}),(0,t.jsx)("option",{value:"up",children:"up"}),(0,t.jsx)("option",{value:"down",children:"down"}),(0,t.jsx)("option",{value:"neutral",children:"neutral"})]}),(0,t.jsxs)("select",{className:"input",value:eV,onChange:e=>eW(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"All TF"}),g.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsxs)("select",{className:"input",value:eO,onChange:e=>eY(e.target.value),children:[(0,t.jsx)("option",{value:"local",children:"Signal Source: Local"}),(0,t.jsx)("option",{value:"ai",children:"Signal Source: AI (fallback local)"})]}),(0,t.jsxs)("select",{className:"input",value:eG,onChange:e=>eq(e.target.value),children:[(0,t.jsx)("option",{value:"newest",children:"Sort: Newest"}),(0,t.jsx)("option",{value:"confidence",children:"Sort: Confidence"}),(0,t.jsx)("option",{value:"move",children:"Sort: Move size"})]}),(0,t.jsx)("button",{className:"btn",type:"button",onClick:()=>{Promise.all([ig(),ib(),iy(),iN()])},disabled:X,children:X?"Refreshing...":"Refresh"}),(0,t.jsx)("button",{className:"btn",type:"button",onClick:()=>void iF(),disabled:ew||0===iC.length,title:0===iC.length?"No rows match current filters":"Delete currently listed rows",children:ew?"Deleting...":"Clear listed (".concat(iC.length,")")})]})}),X?(0,t.jsx)("div",{className:"card",style:{padding:14},children:"Loading predictions…"}):0===iC.length?(0,t.jsxs)("div",{className:"card",style:{padding:14},children:[(0,t.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"No predictions found"}),(0,t.jsx)("div",{style:{color:"var(--muted)"},children:"Adjust filters or create a new prediction above."})]}):(0,t.jsxs)("section",{className:"card",style:{padding:12},children:[(0,t.jsx)("div",{className:"predictionsDesktopTableWrap",style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{textAlign:"left",color:"var(--muted)"},children:[(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Symbol"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Market"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"TF"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Signal"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Confidence"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Move"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Auto"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Outcome"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Outcome PnL"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Tags / Explanation"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Last Updated"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Change"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Created"}),(0,t.jsx)("th",{style:{padding:"8px 6px"},children:"Action"})]})}),(0,t.jsx)("tbody",{children:iC.map(e=>{var i,a,n,l,s,r;let o=P(e,eO),c=k(e,eO),u=I(e,eO),p=null!=(n=null==(i=e.localPrediction)?void 0:i.signal)?n:e.signal,h=!!e.aiPrediction,g=h&&e.aiPrediction.signal!==p,f=N(c),b="number"==typeof e.confidenceTargetPct&&Number.isFinite(e.confidenceTargetPct)?Math.max(0,Math.min(100,e.confidenceTargetPct)):0,C=f<b,w=ie===e.id,R=il===e.id,T=null!=(l=e.lastUpdatedAt)?l:e.tsCreated,F=m(null!=(s=e.lastChangeReason)?s:null),L=M({parsedReason:F,autoEnabled:!!e.autoScheduleEnabled}),D=!!F.signalFlip&&x(T,e9,9e5),E="triggered"===F.kind?"predictionReasonBadgeTrigger":"scheduled"===F.kind?"predictionReasonBadgeScheduled":"manual"===F.kind?"predictionReasonBadgeManual":"predictionReasonBadgeUnknown";return(0,t.jsxs)(d.Fragment,{children:[(0,t.jsxs)("tr",{className:D?"predictionRowFlipRecent":void 0,style:{borderTop:"1px solid rgba(255,255,255,.06)"},children:[(0,t.jsx)("td",{style:{padding:"8px 6px",fontWeight:700},children:e.symbol}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:e.marketType}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:e.timeframe}),(0,t.jsxs)("td",{style:{padding:"8px 6px"},children:[(0,t.jsx)("span",{className:"badge",style:_(o),children:o}),h?(0,t.jsxs)("div",{style:{color:"var(--muted)",fontSize:11,marginTop:4},children:["local ",p," / ai ",null==(a=e.aiPrediction)?void 0:a.signal]}):null,"ai"!==eO||h?null:(0,t.jsx)("div",{style:{color:"var(--muted)",fontSize:11,marginTop:4},children:"ai n/a, using local"}),g?(0,t.jsx)("div",{style:{color:"#f59e0b",fontSize:11,marginTop:4},children:"disagreement"}):null]}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:y(c)}),(0,t.jsxs)("td",{style:{padding:"8px 6px"},children:[u.toFixed(2),"%"]}),(0,t.jsxs)("td",{style:{padding:"8px 6px"},children:[(0,t.jsx)("div",{children:e.autoScheduleEnabled?"enabled":"off"}),(0,t.jsxs)("div",{style:{color:"var(--muted)",fontSize:12},children:["Next: ",j(e,e9)]})]}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:S(e.outcomeStatus,e.outcomeResult)}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:null!==e.outcomePnlPct&&void 0!==e.outcomePnlPct?"".concat(e.outcomePnlPct.toFixed(2),"%"):"-"}),(0,t.jsxs)("td",{style:{padding:"8px 6px",maxWidth:360},children:[(0,t.jsx)("div",{style:{display:"flex",gap:4,flexWrap:"wrap",marginBottom:4},children:e.tags.slice(0,4).map(i=>(0,t.jsx)("span",{className:"badge",children:i},"".concat(e.id,"_").concat(i)))}),(0,t.jsx)("div",{style:{color:"var(--muted)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.explanation||"-"})]}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:(0,t.jsx)("div",{className:"predictionUpdateCell",children:(0,t.jsx)("span",{className:"predictionUpdateMeta ".concat(x(T,e9,12e4)?"predictionUpdateMetaFresh":""),title:T?new Date(T).toLocaleString():"n/a",children:v(T,e9)})})}),(0,t.jsx)("td",{style:{padding:"8px 6px",maxWidth:200},children:(0,t.jsxs)("div",{className:"predictionChangeCell",children:[(0,t.jsxs)("div",{className:"predictionChangeBadges",children:[(0,t.jsx)("span",{className:"badge ".concat(E),children:L.label}),F.signalFlip?(0,t.jsxs)("span",{className:"badge predictionFlipBadge",children:["FLIP ",A(F.signalFlip)]}):null]}),(0,t.jsx)("div",{className:"predictionChangeText",title:null!=(r=L.rawReason)?r:"n/a",children:L.shortReason})]})}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:new Date(e.tsCreated).toLocaleString()}),(0,t.jsx)("td",{style:{padding:"8px 6px"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["neutral"===o?(0,t.jsx)("span",{style:{color:"var(--muted)",fontSize:12},children:"No trade setup"}):C?(0,t.jsxs)("span",{style:{color:"var(--muted)",fontSize:12},children:["Below confidence target (",b.toFixed(0),"%)"]}):(0,t.jsx)("button",{className:"btn btnPrimary",onClick:()=>void iP(e.id),disabled:ea===e.id||!e.accountId,title:e.accountId?"Prefill trade ticket":"Create an exchange account first",children:ea===e.id?"Sending...":"Send to Trading Desk"}),(0,t.jsx)("button",{className:"btn",type:"button",onClick:()=>void ik(e.id),disabled:R&&!w,children:w?"Hide details":"Details"})]})})]}),w?(0,t.jsx)("tr",{style:{borderTop:"1px dashed rgba(255,255,255,.08)"},children:(0,t.jsx)("td",{colSpan:14,style:{padding:"10px 6px"},children:iL(e)})}):null]},e.id)})})]})}),(0,t.jsx)("div",{className:"predictionsMobileList",children:iC.map(e=>{var i,a,n;let l=P(e,eO),s=k(e,eO),d=I(e,eO),r=N(s),o="number"==typeof e.confidenceTargetPct&&Number.isFinite(e.confidenceTargetPct)?Math.max(0,Math.min(100,e.confidenceTargetPct)):0,c=r<o,u=ie===e.id,p=il===e.id,h=null!=(i=e.lastUpdatedAt)?i:e.tsCreated,x=m(null!=(a=e.lastChangeReason)?a:null),g=M({parsedReason:x,autoEnabled:!!e.autoScheduleEnabled}),f="triggered"===x.kind?"predictionReasonBadgeTrigger":"scheduled"===x.kind?"predictionReasonBadgeScheduled":"manual"===x.kind?"predictionReasonBadgeManual":"predictionReasonBadgeUnknown";return(0,t.jsxs)("div",{className:"card predictionRowCard",children:[(0,t.jsxs)("div",{className:"predictionRowCardHeader",children:[(0,t.jsx)("div",{className:"predictionRowCardSymbol",children:e.symbol}),(0,t.jsx)("span",{className:"badge",style:_(l),children:l})]}),(0,t.jsxs)("div",{className:"predictionRowCardMeta",children:[(0,t.jsx)("span",{children:e.marketType}),(0,t.jsx)("span",{children:e.timeframe}),(0,t.jsx)("span",{children:new Date(e.tsCreated).toLocaleString()}),(0,t.jsxs)("span",{title:h?new Date(h).toLocaleString():"n/a",children:["Updated ",v(h,e9)]})]}),(0,t.jsxs)("div",{className:"predictionRowCardStats",children:[(0,t.jsxs)("div",{className:"predictionRowCardStat",children:[(0,t.jsx)("div",{className:"predictionRowCardStatLabel",children:"Confidence"}),(0,t.jsx)("div",{className:"predictionRowCardStatValue",children:y(s)})]}),(0,t.jsxs)("div",{className:"predictionRowCardStat",children:[(0,t.jsx)("div",{className:"predictionRowCardStatLabel",children:"Move"}),(0,t.jsxs)("div",{className:"predictionRowCardStatValue",children:[d.toFixed(2),"%"]})]}),(0,t.jsxs)("div",{className:"predictionRowCardStat",children:[(0,t.jsx)("div",{className:"predictionRowCardStatLabel",children:"Outcome"}),(0,t.jsx)("div",{className:"predictionRowCardStatValue",children:S(e.outcomeStatus,e.outcomeResult)})]}),(0,t.jsxs)("div",{className:"predictionRowCardStat",children:[(0,t.jsx)("div",{className:"predictionRowCardStatLabel",children:"Outcome PnL"}),(0,t.jsx)("div",{className:"predictionRowCardStatValue",children:null!==e.outcomePnlPct&&void 0!==e.outcomePnlPct?"".concat(e.outcomePnlPct.toFixed(2),"%"):"-"})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:4,flexWrap:"wrap",marginBottom:6},children:[(0,t.jsx)("span",{className:"badge ".concat(f),children:g.label}),x.signalFlip?(0,t.jsxs)("span",{className:"badge predictionFlipBadge",children:["FLIP ",A(x.signalFlip)]}):null,e.tags.slice(0,4).map(i=>(0,t.jsx)("span",{className:"badge",children:i},"".concat(e.id,"_m_").concat(i)))]}),(0,t.jsx)("div",{className:"predictionRowCardText",title:null!=(n=g.rawReason)?n:"n/a",children:g.shortReason}),(0,t.jsx)("div",{className:"predictionRowCardText",children:e.explanation||"-"}),(0,t.jsxs)("div",{className:"predictionRowCardAuto",children:[(0,t.jsx)("span",{children:e.autoScheduleEnabled?"Auto: enabled":"Auto: off"}),(0,t.jsxs)("span",{children:["Next: ",j(e,e9)]})]}),(0,t.jsxs)("div",{className:"predictionRowCardActions",children:["neutral"===l?(0,t.jsx)("span",{style:{color:"var(--muted)",fontSize:12},children:"No trade setup"}):c?(0,t.jsxs)("span",{style:{color:"var(--muted)",fontSize:12},children:["Below confidence target (",o.toFixed(0),"%)"]}):(0,t.jsx)("button",{className:"btn btnPrimary",onClick:()=>void iP(e.id),disabled:ea===e.id||!e.accountId,title:e.accountId?"Prefill trade ticket":"Create an exchange account first",children:ea===e.id?"Sending...":"Send to Trading Desk"}),(0,t.jsx)("button",{className:"btn",type:"button",onClick:()=>void ik(e.id),disabled:p&&!u,children:u?"Hide details":"Details"})]}),u?(0,t.jsx)("div",{className:"predictionRowCardDetail",children:iL(e)}):null]},"".concat(e.id,"_mobile"))})})]})]})}}},e=>{e.O(0,[664,768,587,18,358],()=>e(e.s=7199)),_N_E=e.O()}]);