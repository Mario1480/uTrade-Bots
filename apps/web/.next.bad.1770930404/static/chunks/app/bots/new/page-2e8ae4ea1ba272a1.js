(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92],{2883:(e,t,n)=>{"use strict";n.d(t,{$P:()=>p,Al:()=>h,GC:()=>g,Vg:()=>d,hD:()=>c,mu:()=>m});var a,s,i,l,r=n(7011);null!=(null!=(a=r.env.API_URL)?a:r.env.API_BASE_URL)||r.env.NEXT_PUBLIC_API_URL;let o=null!=(l=null!=(i=null!=(s=r.env.NEXT_PUBLIC_API_URL)?s:r.env.API_URL)?i:r.env.API_BASE_URL)?l:"http://localhost:4000";class c extends Error{constructor(e,t,n){super(e),this.status=t,this.payload=n}}async function u(e,t,n){let a={"Content-Type":"application/json"};if(!["GET","HEAD","OPTIONS"].includes(e)){let e=function(e){if("undefined"==typeof document)return null;let t=document.cookie.match(new RegExp("(^|; )".concat(e,"=([^;]*)")));return t?decodeURIComponent(t[2]):null}("mm_csrf");e&&(a["x-csrf-token"]=e)}let s=await fetch("".concat(o).concat(t),{method:e,headers:a,body:n?JSON.stringify(n):void 0,credentials:"include",cache:"no-store"});if(!s.ok){let n=null;try{n=await s.json()}catch(e){}throw new c((null==n?void 0:n.error)||(null==n?void 0:n.message)||"".concat(e," ").concat(t," failed (").concat(s.status,")"),s.status,n)}return s.json()}function d(e){return u("GET",e)}function p(e,t){return u("POST",e,t)}function m(e,t){return u("PUT",e,t)}function h(e){return u("DELETE",e)}function g(e){return u("DELETE",e)}},4262:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var a=n(4568),s=n(9664),i=n.n(s),l=n(7541),r=n(7620),o=n(2883);function c(e){return e instanceof o.hD?"".concat(e.message," (HTTP ").concat(e.status,")"):e&&"object"==typeof e&&"message"in e?String(e.message):String(e)}function u(){let e=(0,l.useRouter)(),[t,n]=(0,r.useState)([]),[s,u]=(0,r.useState)(""),[d,p]=(0,r.useState)("BTCUSDT"),[m,h]=(0,r.useState)(""),[g,x]=(0,r.useState)("dummy"),[y,v]=(0,r.useState)("isolated"),[j,f]=(0,r.useState)(1),[S,b]=(0,r.useState)(1e3),[_,N]=(0,r.useState)("15m"),[C,P]=(0,r.useState)(70),[z,T]=(0,r.useState)(600),[E,k]=(0,r.useState)("market"),[B,w]=(0,r.useState)("fixed_usd"),[A,R]=(0,r.useState)(100),[U,L]=(0,r.useState)("news_risk,data_gap,low_liquidity"),[I,D]=(0,r.useState)(!1),[O,q]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=!0;return async function(){try{var t;let a=await (0,o.Vg)("/exchange-accounts");if(!e)return;let s=null!=(t=a.items)?t:[];n(s),!m&&s.length>0&&h(s[0].id)}catch(t){if(!e)return;q(c(t))}}(),()=>{e=!1}},[]);let M=(0,r.useMemo)(()=>!!(s.trim()&&d.trim()&&m&&!I),[s,d,m,I]);async function G(t){if(t.preventDefault(),M){D(!0),q(null);try{let t=d.trim().toUpperCase(),n="prediction_copier"===g?{timeframe:_,minConfidence:C,maxPredictionAgeSec:z,symbols:[t],positionSizing:{type:B,value:A},filters:{blockTags:U.split(",").map(e=>e.trim()).filter(Boolean)},execution:{orderType:E}}:null,a=await (0,o.$P)("/bots",{name:s.trim(),symbol:t,exchangeAccountId:m,strategyKey:g,marginMode:y,leverage:j,tickMs:S,paramsJson:"prediction_copier"===g?{predictionCopier:n}:{}});e.push("/bots/".concat(a.id))}catch(e){q(c(e))}finally{D(!1)}}}return(0,a.jsxs)("div",{className:"container",style:{maxWidth:760},children:[(0,a.jsx)("div",{style:{marginBottom:12},children:(0,a.jsx)(i(),{href:"/",className:"btn",children:"Back"})}),(0,a.jsxs)("div",{className:"card",style:{padding:18},children:[(0,a.jsx)("h2",{style:{marginTop:0},children:"Create Bot"}),(0,a.jsx)("div",{style:{fontSize:13,color:"var(--muted)",marginBottom:10},children:"Bot is bound to one exchange account."}),O?(0,a.jsx)("div",{style:{marginBottom:10,color:"#ef4444",fontSize:13},children:O}):null,0===t.length?(0,a.jsxs)("div",{className:"card",style:{padding:10},children:[(0,a.jsx)("div",{style:{marginBottom:8},children:"No exchange account found."}),(0,a.jsx)(i(),{href:"/settings",className:"btn btnPrimary",children:"Add exchange account"})]}):(0,a.jsxs)("form",{onSubmit:G,style:{display:"grid",gap:10},children:[(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Name"}),(0,a.jsx)("input",{className:"input",value:s,onChange:e=>u(e.target.value),required:!0})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Symbol"}),(0,a.jsx)("input",{className:"input",value:d,onChange:e=>p(e.target.value),required:!0})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Exchange Account"}),(0,a.jsx)("select",{className:"input",value:m,onChange:e=>h(e.target.value),children:t.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.label," (",e.exchange,")"]},e.id))})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:10},children:[(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Strategy"}),(0,a.jsxs)("select",{className:"input",value:g,onChange:e=>x(e.target.value),children:[(0,a.jsx)("option",{value:"dummy",children:"dummy"}),(0,a.jsx)("option",{value:"prediction_copier",children:"prediction_copier"})]})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Margin Mode"}),(0,a.jsxs)("select",{className:"input",value:y,onChange:e=>v(e.target.value),children:[(0,a.jsx)("option",{value:"isolated",children:"isolated"}),(0,a.jsx)("option",{value:"cross",children:"cross"})]})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Leverage"}),(0,a.jsx)("input",{className:"input",type:"number",min:1,max:125,value:j,onChange:e=>f(Number(e.target.value||1))})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Tick (ms)"}),(0,a.jsx)("input",{className:"input",type:"number",min:100,max:6e4,value:S,onChange:e=>b(Number(e.target.value||1e3))})]})]}),"prediction_copier"===g?(0,a.jsxs)("div",{className:"card",style:{padding:12,display:"grid",gap:10},children:[(0,a.jsx)("div",{style:{fontSize:13,fontWeight:600},children:"Prediction Copier Settings"}),(0,a.jsxs)("div",{style:{fontSize:12,color:"var(--muted)"},children:["Kopiert Signale aus ",(0,a.jsx)("code",{children:"predictions_state"})," (enter/exit) mit Risk-Filter."]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:10},children:[(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Prediction TF"}),(0,a.jsxs)("select",{className:"input",value:_,onChange:e=>N(e.target.value),children:[(0,a.jsx)("option",{value:"5m",children:"5m"}),(0,a.jsx)("option",{value:"15m",children:"15m"}),(0,a.jsx)("option",{value:"1h",children:"1h"}),(0,a.jsx)("option",{value:"4h",children:"4h"})]})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Min confidence (%)"}),(0,a.jsx)("input",{className:"input",type:"number",min:0,max:100,value:C,onChange:e=>P(Number(e.target.value||0))})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Max prediction age (sec)"}),(0,a.jsx)("input",{className:"input",type:"number",min:30,max:86400,value:z,onChange:e=>T(Number(e.target.value||600))})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Order type"}),(0,a.jsxs)("select",{className:"input",value:E,onChange:e=>k(e.target.value),children:[(0,a.jsx)("option",{value:"market",children:"market"}),(0,a.jsx)("option",{value:"limit",children:"limit"})]})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Sizing type"}),(0,a.jsxs)("select",{className:"input",value:B,onChange:e=>w(e.target.value),children:[(0,a.jsx)("option",{value:"fixed_usd",children:"fixed_usd"}),(0,a.jsx)("option",{value:"equity_pct",children:"equity_pct"}),(0,a.jsx)("option",{value:"risk_pct",children:"risk_pct"})]})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Sizing value"}),(0,a.jsx)("input",{className:"input",type:"number",min:.01,step:"0.01",value:A,onChange:e=>R(Number(e.target.value||100))})]})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Block tags (comma separated)"}),(0,a.jsx)("input",{className:"input",value:U,onChange:e=>L(e.target.value),placeholder:"news_risk,data_gap,low_liquidity"})]})]}):null,(0,a.jsx)("button",{className:"btn btnPrimary",type:"submit",disabled:!M,children:I?"Creating...":"Create Bot"})]})]})]})}},4900:(e,t,n)=>{Promise.resolve().then(n.bind(n,4262))},7541:(e,t,n)=>{"use strict";var a=n(3041);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=4900)),_N_E=e.O()}]);