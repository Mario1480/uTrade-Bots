(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[700],{654:(e,t,n)=>{Promise.resolve().then(n.bind(n,8750))},2883:(e,t,n)=>{"use strict";n.d(t,{$P:()=>h,Al:()=>f,GC:()=>m,Vg:()=>d,hD:()=>c,mu:()=>p});var s,a,l,r,o=n(7011);null!=(null!=(s=o.env.API_URL)?s:o.env.API_BASE_URL)||o.env.NEXT_PUBLIC_API_URL;let i=null!=(r=null!=(l=null!=(a=o.env.NEXT_PUBLIC_API_URL)?a:o.env.API_URL)?l:o.env.API_BASE_URL)?r:"http://localhost:4000";class c extends Error{constructor(e,t,n){super(e),this.status=t,this.payload=n}}async function u(e,t,n){let s={"Content-Type":"application/json"};if(!["GET","HEAD","OPTIONS"].includes(e)){let e=function(e){if("undefined"==typeof document)return null;let t=document.cookie.match(new RegExp("(^|; )".concat(e,"=([^;]*)")));return t?decodeURIComponent(t[2]):null}("mm_csrf");e&&(s["x-csrf-token"]=e)}let a=await fetch("".concat(i).concat(t),{method:e,headers:s,body:n?JSON.stringify(n):void 0,credentials:"include",cache:"no-store"});if(!a.ok){let n=null;try{n=await a.json()}catch(e){}throw new c((null==n?void 0:n.error)||(null==n?void 0:n.message)||"".concat(e," ").concat(t," failed (").concat(a.status,")"),a.status,n)}return a.json()}function d(e){return u("GET",e)}function h(e,t){return u("POST",e,t)}function p(e,t){return u("PUT",e,t)}function f(e){return u("DELETE",e)}function m(e){return u("DELETE",e)}},7541:(e,t,n)=>{"use strict";var s=n(3041);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},8750:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var s=n(4568),a=n(9664),l=n.n(a),r=n(7541),o=n(7620),i=n(2883);function c(e){return e instanceof i.hD?"".concat(e.message," (HTTP ").concat(e.status,")"):e&&"object"==typeof e&&"message"in e?String(e.message):String(e)}function u(){let e=(0,r.useRouter)(),[t,n]=(0,o.useState)(""),[a,u]=(0,o.useState)(""),[d,h]=(0,o.useState)(""),[p,f]=(0,o.useState)(""),[m,v]=(0,o.useState)(""),[g,y]=(0,o.useState)(""),[x,w]=(0,o.useState)(null);async function P(){v("sending code..."),y(""),w(null);try{let e=await (0,i.$P)("/auth/password-reset/request",{email:t});v("If the account exists, a reset code was sent".concat((null==e?void 0:e.expiresInMinutes)?" (valid ".concat(e.expiresInMinutes," min)"):"",".")),(null==e?void 0:e.devCode)&&w(e.devCode)}catch(e){v(""),y(c(e))}}async function S(){if(v("updating password..."),y(""),d!==p){v(""),y("New password and confirmation do not match.");return}try{await (0,i.$P)("/auth/password-reset/confirm",{email:t,code:a,newPassword:d}),v("Password updated. Redirecting to login..."),u(""),h(""),f(""),setTimeout(()=>{e.push("/login")},1e3)}catch(e){v(""),y(c(e))}}return(0,s.jsxs)("div",{className:"container",style:{maxWidth:520},children:[(0,s.jsx)("h1",{style:{marginTop:0},children:"Reset Password"}),(0,s.jsx)("div",{className:"card",style:{padding:16},children:(0,s.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,s.jsxs)("label",{style:{fontSize:13},children:["Account email",(0,s.jsx)("input",{className:"input",type:"email",value:t,onChange:e=>n(e.target.value),placeholder:"you@example.com",required:!0})]}),(0,s.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:(0,s.jsx)("button",{className:"btn",type:"button",disabled:!t,onClick:()=>void P(),children:"Send reset code"})}),(0,s.jsxs)("label",{style:{fontSize:13},children:["Reset code (6 digits)",(0,s.jsx)("input",{className:"input",type:"text",value:a,onChange:e=>u(e.target.value),placeholder:"123456",maxLength:6})]}),(0,s.jsxs)("label",{style:{fontSize:13},children:["New password",(0,s.jsx)("input",{className:"input",type:"password",value:d,onChange:e=>h(e.target.value),placeholder:"at least 8 characters",minLength:8})]}),(0,s.jsxs)("label",{style:{fontSize:13},children:["Confirm new password",(0,s.jsx)("input",{className:"input",type:"password",value:p,onChange:e=>f(e.target.value),placeholder:"repeat new password",minLength:8})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,s.jsx)("button",{className:"btn btnPrimary",type:"button",disabled:!t||6!==a.length||d.length<8,onClick:()=>void S(),children:"Set new password"}),(0,s.jsx)(l(),{href:"/login",className:"btn",children:"Back to login"})]}),m?(0,s.jsx)("div",{style:{fontSize:12,color:"var(--muted)"},children:m}):null,x?(0,s.jsxs)("div",{style:{fontSize:12,color:"#facc15"},children:["Dev reset code: ",(0,s.jsx)("b",{children:x})]}):null,g?(0,s.jsx)("div",{style:{fontSize:12,color:"#ef4444"},children:g}):null]})})]})}}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=654)),_N_E=e.O()}]);