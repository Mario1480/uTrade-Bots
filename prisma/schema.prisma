// apps/api/src/index.ts
import express from "express";
import { PrismaClient } from "@prisma/client";

const app = express();
const prisma = new PrismaClient();

app.get("/bots/:id", async (req, res) => {
  const id = req.params.id;
  try {
    const bot = await prisma.bot.findUnique({
      where: { id },
      include: {
        mmConfig: true,
        volConfig: true,
        riskConfig: true,
        runtime: true,
      },
    });
    if (!bot) {
      return res.status(404).json({ error: "Bot not found" });
    }
    res.json(bot);
  } catch (error) {
    res.status(500).json({ error: "Internal server error" });
  }
});

export default app;


// apps/web/app/bots/[id]/page.tsx
import React, { useEffect, useState } from "react";
import { useParams } from "next/navigation";

export default function BotPage() {
  const params = useParams();
  const id = params.id as string;

  const [bot, setBot] = useState(null);
  const [runtime, setRuntime] = useState(null);

  async function loadAll() {
    // fetch bot data
  }

  async function loadRuntime() {
    // fetch runtime data
  }

  useEffect(() => {
    if (!id) return;
    loadAll();
    loadRuntime();
    const t = setInterval(loadRuntime, 1200);
    return () => clearInterval(t);
  }, [id]);

  return (
    <div>
      {/* JSX rendering bot details */}
    </div>
  );
}
